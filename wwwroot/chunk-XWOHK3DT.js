import{a as oe,b as w}from"./chunk-OFCHI4WW.js";import{b as Z}from"./chunk-RT5ASK7U.js";import{a as ee,b as te,c as ie}from"./chunk-GZI5C7JE.js";import{H as X,f as P,l as H,n as G,o as p,p as J,t as W}from"./chunk-SZXPZEIS.js";import{A as C,Ac as $,B as f,Ea as D,Ec as k,F as B,Fc as q,L as n,M as m,U as A,Vc as Q,W as R,Wb as x,Xb as O,Y as a,_b as j,ba as I,c as S,fa as s,ga as d,gd as z,ha as u,jd as K,kb as N,la as V,ma as h,na as c,ra as E,sa as L,ta as Y,uc as M,va as U,w as y,z as T}from"./chunk-K432QHKJ.js";import"./chunk-M6OTSRMF.js";import"./chunk-FK6H3RFT.js";import{f as g}from"./chunk-USDYGGWM.js";var b=class extends ie{};S([ee(({value:l})=>O(l)?Number(l):null)],b.prototype,"boardOrder",void 0);var _=class _{constructor(o,i,e,t,r){this.fb=o,this.route=i,this.messageService=e,this.codeService=t,this.boardService=r,this.detail=null,this.ynCodes=this.codeService.createYnCodeData(),this.defaultBoardTypeCode="NORMAL",this.defaultMainShowYn="N",this.defaultUseYn="Y",this.useRemove=!0,this.refresh=new B,this.remove=new B,this.close=new B}ngOnInit(){this.route.data.subscribe(({code:o})=>{this.boardTypeCodes=o.BOARD_TYPE_00}),this.detailForm=this.fb.group({boardId:[""],boardName:["",[p.required,p.maxLength(30)]],boardContent:["",[p.required,p.maxLength(255)]],boardTypeCode:["",[p.required]],boardOrder:["",[p.numeric]],mainShowYn:["",[p.required]],useYn:["",[p.required]]})}ngOnChanges(o){if(o.detail&&this.detailForm){if(this.useRemove=!0,j(o.detail.currentValue)){this.useRemove=!1,this.detailForm.reset({boardTypeCode:this.defaultBoardTypeCode,mainShowYn:this.defaultMainShowYn,useYn:this.defaultUseYn});return}this.detailForm.patchValue(this.detail)}}onSubmit(o){return g(this,null,function*(){let i=x(o.boardId)?"\uB4F1\uB85D":"\uC218\uC815";(yield this.messageService.confirm1(`\uAC8C\uC2DC\uD310\uC744 ${i}\uD558\uC2DC\uACA0\uC5B4\uC694?`))&&(x(o.boardId)?this.boardService.addBoard$(o).subscribe(t=>{this.messageService.toastSuccess(`\uC815\uC0C1\uC801\uC73C\uB85C ${i}\uB418\uC5C8\uC5B4\uC694.`),this.detailForm.get("boardId").patchValue(t.board.boardId),this.refresh.emit()}):this.boardService.updateBoard$(o).subscribe(t=>{this.messageService.toastSuccess(`\uC815\uC0C1\uC801\uC73C\uB85C ${i}\uB418\uC5C8\uC5B4\uC694.`),this.refresh.emit()}))})}onRemove(o){return g(this,null,function*(){(yield this.messageService.confirm2("\uAC8C\uC2DC\uD310\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC5B4\uC694?<br>\uC774 \uC791\uC5C5\uC740 \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC5B4\uC694."))&&this.boardService.removeBoard$(this.detail.boardId).subscribe(()=>{this.messageService.toastSuccess("\uC815\uC0C1\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC5B4\uC694."),this.remove.emit()})})}onClose(){this.close.emit()}};_.\u0275fac=function(i){return new(i||_)(m(Q),m(N),m(K),m(Z),m(w))},_.\u0275cmp=y({type:_,selectors:[["system-board-detail"]],inputs:{detail:"detail"},outputs:{refresh:"refresh",remove:"remove",close:"close"},standalone:!0,features:[T,D],decls:17,vars:24,consts:[[3,"submit","remove","close","form","useRemove"],[3,"text"],[1,"grid","mt-2"],[1,"col-4"],[3,"control","label","readonly","placeholder"],[3,"control","label","data"],[1,"col-6"],[3,"control","label","placeholder"],[1,"col-12"],[3,"control","label"]],template:function(i,e){i&1&&(s(0,"ui-split-form",0),h("submit",function(r){return e.onSubmit(r)})("remove",function(r){return e.onRemove(r)})("close",function(){return e.onClose()}),u(1,"ui-content-title",1),s(2,"div",2)(3,"div",3),u(4,"ui-text-field",4),d(),s(5,"div",3),u(6,"ui-dropdown",5),d(),s(7,"div",3),u(8,"ui-dropdown",5),d(),s(9,"div",6),u(10,"ui-text-field",7),d(),s(11,"div",6),u(12,"ui-dropdown",5),d(),s(13,"div",8),u(14,"ui-text-field",9),d(),s(15,"div",8),u(16,"ui-textarea",7),d()()()),i&2&&(a("form",e.detailForm)("useRemove",e.useRemove),n(),a("text","\uAC8C\uC2DC\uD310 \uC815\uBCF4"),n(3),a("control",e.detailForm.get("boardId"))("label","\uAC8C\uC2DC\uD310 ID")("readonly",!0)("placeholder","\uC790\uB3D9\uC73C\uB85C \uC0DD\uC131\uB3FC\uC694."),n(2),a("control",e.detailForm.get("boardTypeCode"))("label","\uAC8C\uC2DC\uD310 \uAD6C\uBD84")("data",e.boardTypeCodes),n(2),a("control",e.detailForm.get("useYn"))("label","\uC0AC\uC6A9 \uC5EC\uBD80")("data",e.ynCodes),n(2),a("control",e.detailForm.get("boardOrder"))("label","\uAC8C\uC2DC\uD310 \uC21C\uC11C")("placeholder","\uC608) 1"),n(2),a("control",e.detailForm.get("mainShowYn"))("label","\uBA54\uC778 \uD654\uBA74 \uD45C\uCD9C \uC5EC\uBD80")("data",e.ynCodes),n(2),a("control",e.detailForm.get("boardName"))("label","\uAC8C\uC2DC\uD310\uBA85"),n(2),a("control",e.detailForm.get("boardContent"))("label","\uAC8C\uC2DC\uD310 \uB0B4\uC6A9")("placeholder","\uAC8C\uC2DC\uD310 \uD654\uBA74\uC5D0 \uBCF4\uC5EC\uC904 \uC548\uB0B4\uBB38\uAD6C\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."))},dependencies:[J,H,W,G,$]});var v=_;S([te(b)],v.prototype,"onSubmit",null);var ae=["splitter"];function se(l,o){l&1&&u(0,"ui-skeleton")(1,"ui-skeleton")(2,"ui-skeleton")}function le(l,o){if(l&1){let i=V();s(0,"ui-splitter",null,0)(2,"ui-table",2,1),h("refresh",function(){C(i);let t=c();return f(t.onRefresh())})("rowSelect",function(t){C(i);let r=c();return f(r.onRowSelect(t))})("unRowSelect",function(t){C(i);let r=c();return f(r.onRowUnselect(t))}),s(4,"ui-button",3),h("click",function(){C(i);let t=c();return f(t.addBoard())}),d()(),s(5,"div",4)(6,"system-board-detail",5),h("refresh",function(){C(i);let t=c();return f(t.listBoard())})("remove",function(){C(i);let t=c();return f(t.onRemove())})("close",function(){C(i);let t=c();return f(t.onClose())}),d()()()}if(l&2){let i=c();n(2),a("useAdd",!1)("useRemove",!1)("cols",i.cols)("data",i.boardList)("dataKey","boardId")("selection",i.selection),n(2),a("size","small")("icon","pi-plus")("label","\uAC8C\uC2DC\uD310 \uB4F1\uB85D")("outlined",!0),n(2),a("detail",i.detail)}}var Ye=(()=>{let o=class o extends P{constructor(e,t){super(),this.boardStore=e,this.boardService=t,this.detail=null,this.cols=[{field:"boardTypeCodeName",header:"\uAC8C\uC2DC\uD310 \uAD6C\uBD84"},{field:"boardName",header:"\uAC8C\uC2DC\uD310\uBA85"},{field:"articleCount",header:"\uAC8C\uC2DC\uAE00",valueGetter:r=>`${r.articleCount}\uAC1C`},{field:"mainShowYn",header:"\uBA54\uC778 \uD654\uBA74 \uD45C\uCD9C \uC5EC\uBD80"},{field:"useYn",header:"\uC0AC\uC6A9 \uC5EC\uBD80"}]}get boardList(){return this.boardStore.select("boardList").value}get boardListDataLoad(){return this.boardStore.select("boardListDataLoad").value}ngOnInit(){!this.boardListDataLoad&&this.user&&this.listBoard()}listBoard(){this.boardService.listBoard()}addBoard(){this.detail={},this.splitter.show()}onRowSelect(e){this.boardService.getBoard$(e.data.boardId).subscribe(t=>{this.detail=t.board,this.splitter.show()})}onRowUnselect(e){this.detail={},this.splitter.hide()}onRefresh(){this.listBoard()}onRemove(){this.splitter.hide(),this.listBoard()}onClose(){this.splitter.hide()}};o.\u0275fac=function(t){return new(t||o)(m(oe),m(w))},o.\u0275cmp=y({type:o,selectors:[["view-system-board"]],viewQuery:function(t,r){if(t&1&&E(ae,5),t&2){let F;L(F=Y())&&(r.splitter=F.first)}},standalone:!0,features:[A,D],decls:6,vars:1,consts:[["splitter",""],["table",""],["first","",3,"refresh","rowSelect","unRowSelect","useAdd","useRemove","cols","data","dataKey","selection"],["buttons","",3,"click","size","icon","label","outlined"],["second",""],[3,"refresh","remove","close","detail"]],template:function(t,r){t&1&&(s(0,"layout-page-description")(1,"ul")(2,"li"),U(3,"\uAC8C\uC2DC\uD310\uC744 \uC870\uD68C/\uC785\uB825\uD560 \uC218 \uC788\uC5B4\uC694."),d()()(),R(4,se,3,0)(5,le,7,11,"ui-splitter")),t&2&&(n(4),I(r.boardListDataLoad?5:4))},dependencies:[k,q,z,M,X,v]});let l=o;return l})();export{Ye as SystemBoardComponent};
