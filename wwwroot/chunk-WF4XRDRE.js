import{b as Z}from"./chunk-S4OSOZKL.js";import{a as K,b as Q,c as W,e as X}from"./chunk-HLNR7QGC.js";import"./chunk-GZI5C7JE.js";import{H as J,f as D,k as y,l as x,o as p,q as G}from"./chunk-6O6EEPEW.js";import{A as w,Ac as N,B as M,Ea as S,Ec as Y,L as u,M as m,Rb as L,U as b,Vc as F,W as g,Wc as z,Y as l,Zb as O,_b as j,b as I,ba as B,cc as V,dc as H,fa as t,ga as o,ha as C,jd as R,la as P,lc as $,ma as v,na as h,qb as U,r as k,uc as _,va as c,w as A,wc as q,xa as T}from"./chunk-SI4ONGGJ.js";import"./chunk-M6OTSRMF.js";import"./chunk-FK6H3RFT.js";import"./chunk-USDYGGWM.js";var E=(()=>{let n=class n extends V{constructor(){super()}init(){this.creates([{key:"userCertHistory",defaultValue:null}])}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let a=n;return a})();function ae(a,n){if(a&1&&(t(0,"div",2)(1,"div",8),C(2,"ui-text-field",9),o(),t(3,"div",5)(4,"ui-button",10),c(5," \uD655\uC778 "),o()()()),a&2){let d=h();u(2),l("control",d.findPasswordForm.get("certCode"))("label",d.certCodeLabel),u(2),l("type","submit")("severity","success")}}var ie=(()=>{let n=class n extends D{constructor(r,i,e){super(),this.fb=r,this.authStore=i,this.messageService=e,this.certCodeLabel="\uC778\uC99D\uCF54\uB4DC",this.timer=null}get userCertHistory(){return this.authStore.select("userCertHistory").value}ngOnInit(){this.findAccountForm=this.fb.group({employeeName:["",[p.required]],emailAddr:["",[p.required,p.email]]}),this.findPasswordForm=this.fb.group({userAccount:["",[p.required]],emailAddr:["",[p.required,p.email]],certCode:[""]})}onSubmitFindAccount(r){this.authService.findUserAccount$(r).subscribe(()=>{this.messageService.toastSuccess("\uC544\uC774\uB514\uB97C \uBA54\uC77C\uB85C \uBC1C\uC1A1\uD588\uC5B4\uC694. \uBA54\uC77C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.")})}onSubmitFindPassword(r){this.userCertHistory===null?this.authService.findUserPassword1$(r).subscribe(i=>{this.timer&&clearInterval(this.timer);let e=Number(i.userCertHistory.validTime),f=new I(L.duration(e,"seconds").format("mm:ss"));this.timer=setInterval(()=>{e>0?(e--,f.next(L.duration(e,"seconds").format("mm:ss"))):clearInterval(this.timer)},1e3),f.subscribe(s=>{this.certCodeLabel=`\uC778\uC99D\uCF54\uB4DC(${s})`}),this.authStore.update("userCertHistory",i.userCertHistory),this.messageService.toastSuccess("\uC778\uC99D\uCF54\uB4DC\uB97C \uBA54\uC77C\uB85C \uBC1C\uC1A1\uD588\uC5B4\uC694. \uBA54\uC77C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.")}):this.authService.findUserPassword2$(this.findPasswordForm.value).subscribe(()=>{this.messageService.toastSuccess("\uC784\uC2DC \uBE44\uBC00\uBC88\uD638\uB97C \uBA54\uC77C\uB85C \uBC1C\uC1A1\uD588\uC5B4\uC694. \uBA54\uC77C\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.")})}};n.\u0275fac=function(i){return new(i||n)(m(F),m(E),m(R))},n.\u0275cmp=A({type:n,selectors:[["modal-find-my-info"]],standalone:!0,features:[b,S],decls:35,vars:21,consts:[[3,"text"],[3,"submit","form","useSubmit"],[1,"grid"],[1,"col-6","sm:col-5"],[3,"control","label","showErrorMessage"],[1,"col-12","sm:col","flex","align-items-end"],[3,"type"],[1,"mt-5"],[1,"col-12","sm:col-10"],[3,"control","label"],["button","",3,"type","severity"]],template:function(i,e){i&1&&(t(0,"div"),C(1,"ui-content-title",0),t(2,"layout-page-description")(3,"ul")(4,"li"),c(5,"\uC2DC\uC2A4\uD15C\uC5D0 \uB4F1\uB85D\uB41C \uC2E4\uBA85 \uBC0F \uC774\uBA54\uC77C\uC8FC\uC18C\uB97C \uC785\uB825\uD558\uBA74 \uAC00\uC785\uB41C \uC544\uC774\uB514\uAC00 \uC774\uBA54\uC77C\uC8FC\uC18C\uB85C \uBC1C\uC1A1\uB3FC\uC694."),o(),t(6,"li"),c(7,"\uC774\uBA54\uC77C\uC8FC\uC18C\uAC00 \uB4F1\uB85D\uB418\uC5B4 \uC788\uC9C0 \uC54A\uC740 \uACBD\uC6B0, \uC2DC\uC2A4\uD15C\uAD00\uB9AC\uC790\uC5D0\uAC8C \uBB38\uC758\uD574\uC8FC\uC138\uC694."),o()()(),t(8,"ui-form",1),v("submit",function(s){return e.onSubmitFindAccount(s)}),t(9,"div",2)(10,"div",3),C(11,"ui-text-field",4),o(),t(12,"div",3),C(13,"ui-text-field",4),o(),t(14,"div",5)(15,"ui-button",6),c(16,"\uD655\uC778"),o()()()()(),t(17,"div",7),C(18,"ui-content-title",0),t(19,"layout-page-description")(20,"ul")(21,"li"),c(22,"\uC2DC\uC2A4\uD15C\uC5D0 \uB4F1\uB85D\uB41C \uC544\uC774\uB514 \uBC0F \uC774\uBA54\uC77C\uC8FC\uC18C\uB97C \uC785\uB825\uD558\uBA74 \uBCF8\uC778\uC778\uC99D \uD6C4, \uC784\uC2DC \uBE44\uBC00\uBC88\uD638(2\uC2DC\uAC04 \uC720\uD6A8)\uAC00 \uC774\uBA54\uC77C\uC8FC\uC18C\uB85C \uBC1C\uC1A1\uB3FC\uC694."),o(),t(23,"li"),c(24,"\uC774\uBA54\uC77C\uC8FC\uC18C\uAC00 \uB4F1\uB85D\uB418\uC5B4 \uC788\uC9C0 \uC54A\uC740 \uACBD\uC6B0, \uC2DC\uC2A4\uD15C\uAD00\uB9AC\uC790\uC5D0\uAC8C \uBB38\uC758\uD574\uC8FC\uC138\uC694."),o()()(),t(25,"ui-form",1),v("submit",function(s){return e.onSubmitFindPassword(s)}),t(26,"div",2)(27,"div",3),C(28,"ui-text-field",4),o(),t(29,"div",3),C(30,"ui-text-field",4),o(),t(31,"div",5)(32,"ui-button",6),c(33,"\uD655\uC778"),o()()(),g(34,ae,6,4,"div",2),o()()),i&2&&(u(),l("text","\uC544\uC774\uB514 \uCC3E\uAE30"),u(7),l("form",e.findAccountForm)("useSubmit",!1),u(3),l("control",e.findAccountForm.get("employeeName"))("label","\uC2E4\uBA85")("showErrorMessage",!1),u(2),l("control",e.findAccountForm.get("emailAddr"))("label","\uC774\uBA54\uC77C\uC8FC\uC18C")("showErrorMessage",!1),u(2),l("type","submit"),u(3),l("text","\uBE44\uBC00\uBC88\uD638 \uCC3E\uAE30"),u(7),l("form",e.findPasswordForm)("useSubmit",!1),u(3),l("control",e.findPasswordForm.get("userAccount"))("label","\uC544\uC774\uB514")("showErrorMessage",!1),u(2),l("control",e.findPasswordForm.get("emailAddr"))("label","\uC774\uBA54\uC77C\uC8FC\uC18C")("showErrorMessage",!1),u(2),l("type","submit"),u(2),B(e.userCertHistory!==null?34:-1))},dependencies:[z,y,x,_,N,J]});let a=n;return a})();function le(a,n){a&1&&C(0,"ui-skeleton")}function se(a,n){if(a&1){let d=P();t(0,"a",12),v("click",function(){w(d);let i=h(2);return M(i.getArticle(i.noticeList[0].articleId))}),C(1,"i",13),c(2),o(),t(3,"ui-button",14),v("click",function(){w(d);let i=h(2);return M(i.listArticleModal(2))}),o()}if(a&2){let d=h(2);u(2),T(" ",d.noticeList[0].articleTitle," "),u(),l("icon","pi-plus")("size","small")("rounded",!0)("text",!0)("title","\uACF5\uC9C0\uC0AC\uD56D \uB354\uBCF4\uAE30")}}function ce(a,n){if(a&1&&g(0,se,4,6),a&2){let d=h();B((d.noticeList==null?null:d.noticeList.length)>0?0:-1)}}var ke=(()=>{let n=class n extends D{constructor(r,i,e,f,s,oe,ne){super(),this.fb=r,this.authStore=i,this.articleStore=e,this.dialogService=f,this.loadingService=s,this.articleService=oe,this.boardService=ne}get noticeList(){return this.articleStore.select("noticeList").value}get noticeListDataLoad(){return this.articleStore.select("noticeListDataLoad").value}ngOnInit(){this.loginForm=this.fb.group({userAccount:["",[p.required]],userPassword:["",[p.required]],saveUserAccountYn:[""]}),this.savedUserAccount=this.authService.getSavedUserAccount(),O(this.savedUserAccount)&&this.loginForm.patchValue({userAccount:this.savedUserAccount,saveUserAccountYn:["Y"]}),this.noticeListDataLoad||this.listArticle()}onSubmit(r){this.authService.login(r)}showFindMyInfoModal(r){this.dialogService.open(ie,{focusOnShow:!1,header:"\uC544\uC774\uB514/\uBE44\uBC00\uBC88\uD638 \uCC3E\uAE30"}).onClose.subscribe(e=>{this.authStore.update("userCertHistory",null)})}getArticle(r){let i=setTimeout(()=>this.loadingService.setLoading(!0),500);this.articleService.getArticle$(r).subscribe(e=>{clearTimeout(i),this.loadingService.setLoading(!1),this.dialogService.open(W,{focusOnShow:!1,header:e.article.articleTitle,width:"1000px",data:e})?.onClose.subscribe(s=>{j(s)||s.action===this.actions.RELOAD&&this.getArticle(s.data.articleId)})})}listArticle(){this.articleService.listArticle$({boardId:2}).subscribe(r=>{this.articleStore.update("noticeListDataLoad",!0),this.articleStore.update("noticeList",r.articleList)})}listArticleModal(r){let i=setTimeout(()=>this.loadingService.setLoading(!0),500);this.boardService.getBoard$(r).subscribe(e=>{clearTimeout(i),this.loadingService.setLoading(!1),this.dialogService.open(X,{focusOnShow:!1,header:e.board.boardName,width:"1200px",height:"100%",data:{boardId:r,from:"login"}})})}};n.\u0275fac=function(i){return new(i||n)(m(F),m(E),m(K),m($),m(H),m(Q),m(Z))},n.\u0275cmp=A({type:n,selectors:[["view-login"]],standalone:!0,features:[b,S],decls:24,vars:19,consts:[[1,"login-wrapper"],[1,"login__form"],[1,"login__title"],[1,"notice-list"],[3,"submit","form","useSubmit"],[1,"input-box"],[3,"block","control","label","placeholder","autocomplete"],[3,"block","control","label","placeholder","type","autocomplete"],[3,"control","label","value"],[3,"block","type"],[1,"mt-3","text-center"],["href","javascript:void(0)",1,"link",3,"click"],["href","javascript:void(0)",3,"click"],[1,"pi","pi-bell"],[3,"click","icon","size","rounded","text","title"]],template:function(i,e){i&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),c(3,"\uD734\uAC00\xB7\uAE09\uC5EC\uAE30\uB85D\uBD80"),o(),t(4,"div",3),g(5,le,1,0,"ui-skeleton")(6,ce,1,1),o(),t(7,"ui-card")(8,"p"),c(9,"\uC804\uC5D0 \uB2E4\uB154\uB358 \uD68C\uC0AC \uAE09\uC5EC\uBA85\uC138\uC11C\uAC00 \uC5B4\uB514 \uC788\uB354\uB77C?"),o(),t(10,"p"),c(11,"\uCC3E\uB294 \uAC74 \uC774\uC81C \uADF8\uB9CC! \uD68C\uC0AC\uBCC4 \uD734\uAC00, \uAE09\uC5EC \uC815\uBCF4\uB97C \uD55C \uACF3\uC5D0\uC11C \uAD00\uB9AC\uD558\uC138\uC694!"),o()(),t(12,"ui-form",4),v("submit",function(s){return e.onSubmit(s)}),t(13,"div",5),C(14,"ui-text-field",6),o(),t(15,"div",5),C(16,"ui-text-field",7),o(),t(17,"div",5),C(18,"ui-checkbox",8),o(),t(19,"ui-button",9),c(20,"\uB85C\uADF8\uC778"),o(),t(21,"div",10)(22,"a",11),v("click",function(s){return e.showFindMyInfoModal(s)}),c(23,"\uC544\uC774\uB514 or \uBE44\uBC00\uBC88\uD638\uB97C \uC78A\uC73C\uC168\uB098\uC694?"),o()()()()()),i&2&&(u(5),B(e.noticeListDataLoad?6:5),u(7),l("form",e.loginForm)("useSubmit",!1),u(2),l("block",!0)("control",e.loginForm.get("userAccount"))("label","\uC544\uC774\uB514")("placeholder","\uC544\uC774\uB514")("autocomplete","username"),u(2),l("block",!0)("control",e.loginForm.get("userPassword"))("label","\uBE44\uBC00\uBC88\uD638")("placeholder","\uBE44\uBC00\uBC88\uD638")("type","password")("autocomplete","current-password"),u(2),l("control",e.loginForm.get("saveUserAccountYn"))("label","\uC544\uC774\uB514 \uC800\uC7A5")("value","Y"),u(),l("block",!0)("type","submit"))},dependencies:[U,q,y,_,x,G,Y],styles:[".login-wrapper[_ngcontent-%COMP%]{padding:5rem 1rem 0;background-color:var(--gray-50);align-content:center}.login__form[_ngcontent-%COMP%]{max-width:30rem;margin:0 auto;padding:20px;border:1px solid var(--surface-300);background-color:var(--surface-0)}@media (min-width: 30em){.login__form[_ngcontent-%COMP%]{padding:2rem}}.login__title[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;font-size:26px}@media (min-width: 48em){.login__title[_ngcontent-%COMP%]{font-size:2.25rem}}.notice-list[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.notice-list[_ngcontent-%COMP%] > ui-skeleton[_ngcontent-%COMP%]{width:100%}.notice-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;overflow:hidden;width:100%;text-overflow:ellipsis;white-space:nowrap}.notice-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.notice-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.25rem}"]});let a=n;return a})();export{ke as LoginComponent};
