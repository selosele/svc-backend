import{a as le,b as D}from"./chunk-ZLXLKUIA.js";import{a as Q,b as Te,c as Fe}from"./chunk-GZI5C7JE.js";import{H as re,f as I,k as U,l as ie,m as ae,n as Ie,o as ne,q as De,t as ke,z as oe}from"./chunk-JLKPBOCX.js";import{A as c,B as d,Ea as w,Ec as Z,F as ye,Fa as fe,Ga as Se,I as W,Ic as we,Ka as pe,L as s,M as y,Ma as ue,Rb as g,U as b,Vc as O,W as S,Wb as B,Wc as ee,Xb as Y,Y as m,_ as K,_b as L,ab as ve,ba as f,bb as G,c as H,ca as R,da as N,dc as Ee,ea as $,ec as be,f as de,fa as a,ga as n,gd as Be,ha as h,ic as X,jc as J,jd as te,kb as xe,la as A,lc as Pe,ma as C,na as u,nb as Ae,qb as ge,ra as Ce,sa as _e,ta as he,uc as j,va as p,w as E,wa as x,xa as P}from"./chunk-FXQXXIJP.js";import"./chunk-M6OTSRMF.js";import"./chunk-FK6H3RFT.js";import{a as V,b as M,f as F}from"./chunk-USDYGGWM.js";var We=["salaryDetailView"];function Re(o,l){if(o&1&&(a(0,"tr")(1,"th",10),p(2,"\uBE44\uACE0"),n(),a(3,"td",27),p(4),n()()),o&2){let i=u();s(4),x(i.payslip.payslipNote)}}function Ne(o,l){if(o&1){let i=A();a(0,"div",11)(1,"ui-checkbox",28),C("change",function(t){c(i);let r=u();return d(r.onShowCompareYnChange(t))}),n()()}if(o&2){let i=u();s(),m("control",i.payslipForm.get("showCompareYn"))("label","\uC774\uC804 \uB2EC\uACFC \uBE44\uAD50\uD574\uC11C \uBCF4\uAE30")("value","Y")}}function $e(o,l){if(o&1&&h(0,"span",18),o&2){let i=u(2).$implicit,e=u();m("innerHTML",e.getCompareText(i.salaryAmountCompare,i.salaryAmountComparePercent),W)}}function je(o,l){if(o&1&&(a(0,"tr")(1,"th",10),p(2),n(),a(3,"td",17)(4,"div"),S(5,$e,1,1,"span",18),p(6),n()()()),o&2){let i=u().$implicit,e=u();s(2),x(i.salaryAmountCodeName),s(2),K("salary-detail__content-compare--active",e.isShowCompareActive),s(),f(e.isShowCompareActive?5:-1),s(),P(" ",e.numberWithCommas(i.salaryAmount)," ")}}function Oe(o,l){if(o&1&&S(0,je,7,5,"tr"),o&2){let i=l.$implicit,e=u();f(i.salaryTypeCode===e.salaryTypeA00code.value&&e.isSalaryAmountExist(i.salaryAmount)?0:-1)}}function Ue(o,l){if(o&1&&h(0,"span",18),o&2){let i=u();m("innerHTML",i.getCompareText(i.payslip.totalAmountCompareA00,i.payslip.totalAmountComparePercentA00),W)}}function ze(o,l){if(o&1&&h(0,"span",18),o&2){let i=u(2).$implicit,e=u();m("innerHTML",e.getCompareText(i.salaryAmountCompare,i.salaryAmountComparePercent),W)}}function qe(o,l){if(o&1&&(a(0,"tr")(1,"th",10),p(2),n(),a(3,"td",17)(4,"div"),S(5,ze,1,1,"span",18),p(6),n()()()),o&2){let i=u().$implicit,e=u();s(2),x(i.salaryAmountCodeName),s(2),K("salary-detail__content-compare--active",e.isShowCompareActive),s(),f(e.isShowCompareActive?5:-1),s(),P(" ",e.numberWithCommas(i.salaryAmount)," ")}}function Ke(o,l){if(o&1&&S(0,qe,7,5,"tr"),o&2){let i=l.$implicit,e=u();f(i.salaryTypeCode===e.salaryTypeB00code.value&&e.isSalaryAmountExist(i.salaryAmount)?0:-1)}}function Qe(o,l){if(o&1&&h(0,"span",18),o&2){let i=u();m("innerHTML",i.getCompareText(i.payslip.totalAmountCompareB00,i.payslip.totalAmountComparePercentB00),W)}}function Ge(o,l){if(o&1&&h(0,"span",22),o&2){let i=u();m("innerHTML",i.getCompareText(i.payslip.totalAmountCompare,i.payslip.totalAmountComparePercent),W)}}function Xe(o,l){if(o&1){let i=A();a(0,"ui-button",29),C("click",function(){c(i);let t=u();return d(t.goPrevNextPayslip(t.prevPayslip==null?null:t.prevPayslip.payslipId,t.prevPayslip==null?null:t.prevPayslip.payslipPaymentYmd))}),n(),a(1,"ui-button",29),C("click",function(){c(i);let t=u();return d(t.goPrevNextPayslip(t.nextPayslip==null?null:t.nextPayslip.payslipId,t.nextPayslip==null?null:t.nextPayslip.payslipPaymentYmd))}),n()}if(o&2){let i=u();m("icon","pi-chevron-left")("rounded",!0)("text",!0)("severity","primary")("disabled",i.prevPayslip==null)("title","\uC774\uC804 \uAE09\uC5EC\uBA85\uC138\uC11C"),s(),m("icon","pi-chevron-right")("rounded",!0)("text",!0)("severity","primary")("disabled",i.nextPayslip==null)("title","\uB2E4\uC74C \uAE09\uC5EC\uBA85\uC138\uC11C")}}function Je(o,l){if(o&1){let i=A();a(0,"ui-button",30),C("click",function(){c(i);let t=u();return d(t.updatePayslip(t.payslip,t.actions.COPY))}),p(1," \uBCF5\uC0AC "),n(),a(2,"ui-button",31),C("click",function(){c(i);let t=u();return d(t.updatePayslip(t.payslip))}),p(3," \uC218\uC815 "),n()}o&2&&(m("size","small")("severity","secondary")("title","\uD604\uC7AC \uAE09\uC5EC\uBA85\uC138\uC11C\uB97C \uBCF5\uC0AC\uD574\uC11C \uC0C8 \uAE09\uC5EC\uBA85\uC138\uC11C\uB97C \uB4F1\uB85D\uD558\uB294 \uAE30\uB2A5\uC774\uC5D0\uC694."),s(2),m("size","small")("severity","primary"))}function Ze(o,l){if(o&1){let i=A();a(0,"ui-button",31),C("click",function(){c(i);let t=u();return d(t.removePayslip(t.payslip.payslipId))}),p(1," \uC0AD\uC81C "),n()}o&2&&m("size","small")("severity","danger")}var Le=(()=>{let l=class l extends I{constructor(e,t,r,v,_,se){super(),this.fb=e,this.config=t,this.dialogRef=r,this.messageService=v,this.fileService=_,this.payslipService=se,this.isShowCompareActive=!1}get salaryTypeA00code(){return this.config.data.salaryTypecodes.find(e=>e.value==="A00")}get salaryTypeB00code(){return this.config.data.salaryTypecodes.find(e=>e.value==="B00")}get salaryAmountA00Codes(){return this.config.data.salaryAmountA00Codes}get salaryAmountB00Codes(){return this.config.data.salaryAmountB00Codes}get payslip(){return this.config.data.payslip}get payslipList(){return this.config.data.payslipList}get prevPayslip(){return this.payslipList?.find(e=>e.prevNextFlag==="PREV")}get nextPayslip(){return this.payslipList?.find(e=>e.prevNextFlag==="NEXT")}ngOnInit(){this.payslipForm=this.fb.group({showCompareYn:[]});let e=g(this.payslip.payslipPaymentYmd).format("YYYY\uB144 MM\uC6D4");this.title=`${e} \uAE09\uC5EC\uBA85\uC138\uC11C (${this.payslip.companyName} - ${this.numberWithCommas(this.payslip.totalAmount)}\uC6D0)`}goPrevNextPayslip(e,t){B(e)||this.dialogRef.close({action:this.actions.RELOAD,data:{payslipId:e,payslipPaymentYmd:t}})}updatePayslip(e,t=this.actions.UPDATE){this.dialogRef.close({action:t,data:e})}removePayslip(e){return F(this,null,function*(){(yield this.messageService.confirm2("\uAE09\uC5EC\uBA85\uC138\uC11C\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC5B4\uC694?<br>\uC774 \uC791\uC5C5\uC740 \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC5B4\uC694."))&&this.payslipService.removePayslip$(e).subscribe(()=>{this.messageService.toastSuccess("\uC815\uC0C1\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC5B4\uC694."),this.dialogRef.close({action:this.actions.SAVE})})})}exportPdf(){return F(this,null,function*(){let e=g(this.payslip.payslipPaymentYmd).format("YYYY\uB144 MM\uC6D4"),t=this.salaryDetailView.nativeElement;yield this.fileService.exportPdf({element:t,fileName:`${e} \uAE09\uC5EC\uBA85\uC138\uC11C(${this.payslip.companyName}, ${this.user?.employeeName}).pdf`,ignoreElements:["btnExportPdf","salaryDetailUtilBox1"],orientation:t.scrollWidth>t.scrollHeight?"landscape":"portrait",margin:10})})}isSalaryAmountExist(e){return Y(e)}getCompareText(e,t){let r="\uBCC0\uB3D9\uC5C6\uC74C";return e>0?r=`<span class="text-red-500 font-bold">+${this.numberWithCommas(Math.abs(e))}\uC6D0 (${t?.toFixed(2)}%)</span>`:e<0&&(r=`<span class="text-primary font-bold">-${this.numberWithCommas(Math.abs(e))}\uC6D0 (${t?.toFixed(2)}%)</span>`),r}onShowCompareYnChange(e){e.checked[0]==="Y"?this.isShowCompareActive=!0:this.isShowCompareActive=!1}};l.\u0275fac=function(t){return new(t||l)(y(O),y(X),y(J),y(te),y(be),y(D))},l.\u0275cmp=E({type:l,selectors:[["salary-payslip-salary-detail"]],viewQuery:function(t,r){if(t&1&&Ce(We,5),t&2){let v;_e(v=he())&&(r.salaryDetailView=v.first)}},standalone:!0,features:[b,w],decls:108,vars:35,consts:[["salaryDetailView",""],[1,"salary-detail"],[3,"form","useSubmit"],[1,"salary-detail__view"],[1,"flex","justify-content-between","align-items-center","mt-2","mb-3","pb-3","border-bottom-1","border-gray-300"],[1,"m-0"],["id","btnExportPdf",3,"click","icon","rounded","text","severity","title"],[1,"salary-detail__content"],[1,"ui-basic-table","type1"],[2,"width","25%"],["scope","row"],["id","salaryDetailUtilBox1",1,"mt-3","text-right"],[1,"flex"],[1,"ui-basic-table","type2","flex-grow-1","mt-3"],[2,"width","50%"],["scope","col","colspan","2"],["scope","col"],[1,"text-right"],[1,"salary-detail__content-compare-text",3,"innerHTML"],[1,"mt-4","text-right"],[1,"text-lg"],[1,"block","text-2xl"],[1,"ml-1","text-base","font-normal",3,"innerHTML"],[1,"salary-detail__buttons"],[1,"salary-detail__buttons__prevnext"],[1,"salary-detail__buttons__crud"],[3,"size","severity"],["colspan","3"],[3,"change","control","label","value"],[3,"click","icon","rounded","text","severity","disabled","title"],[3,"click","size","severity","title"],[3,"click","size","severity"]],template:function(t,r){if(t&1){let v=A();a(0,"div",1)(1,"ui-form",2)(2,"div",3,0)(4,"div",4)(5,"h2",5),p(6),n(),a(7,"ui-button",6),C("click",function(){return c(v),d(r.exportPdf())}),n()(),a(8,"div",7)(9,"div",8)(10,"table")(11,"caption"),p(12,"\uAE09\uC5EC\uBA85\uC138\uC11C \uAE30\uBCF8 \uC815\uBCF4"),n(),a(13,"colgroup"),h(14,"col",9)(15,"col",9)(16,"col",9)(17,"col",9),n(),a(18,"tbody")(19,"tr")(20,"th",10),p(21,"\uC131\uBA85"),n(),a(22,"td"),p(23),n(),a(24,"th",10),p(25,"\uC785\uC0AC\uC77C\uC790"),n(),a(26,"td"),p(27),pe(28,"date"),n()(),a(29,"tr")(30,"th",10),p(31,"\uC9C1\uC704"),n(),a(32,"td"),p(33),n(),a(34,"th",10),p(35,"\uAE09\uC5EC\uC9C0\uAE09\uC77C"),n(),a(36,"td"),p(37),pe(38,"date"),n()(),S(39,Re,5,1,"tr"),n()()(),S(40,Ne,2,3,"div",11),a(41,"div",12)(42,"div",13)(43,"table")(44,"caption"),p(45,"\uAE09\uC5EC\uBA85\uC138\uC11C \uC138\uBD80 \uB0B4\uC5ED - \uC9C0\uAE09(\uC9C0\uAE09\uB0B4\uC5ED, \uC9C0\uAE09\uC561)"),n(),a(46,"colgroup"),h(47,"col",14)(48,"col",14),n(),a(49,"thead")(50,"tr")(51,"th",15),p(52,"\uC9C0\uAE09"),n()(),a(53,"tr")(54,"th",16),p(55),n(),a(56,"th",16),p(57,"\uC9C0\uAE09\uC561"),n()()(),a(58,"tbody"),N(59,Oe,1,1,null,null,R),n(),a(61,"tfoot")(62,"tr")(63,"th",10),p(64,"\uC9C0\uAE09\uCD1D\uC561"),n(),a(65,"td",17)(66,"div"),S(67,Ue,1,1,"span",18),p(68),n()()()()()(),a(69,"div",13)(70,"table")(71,"caption"),p(72,"\uAE09\uC5EC\uBA85\uC138\uC11C \uC138\uBD80 \uB0B4\uC5ED - \uACF5\uC81C(\uACF5\uC81C\uB0B4\uC5ED, \uACF5\uC81C\uC561)"),n(),a(73,"colgroup"),h(74,"col",14)(75,"col",14),n(),a(76,"thead")(77,"tr")(78,"th",15),p(79,"\uACF5\uC81C"),n()(),a(80,"tr")(81,"th",16),p(82),n(),a(83,"th",16),p(84,"\uACF5\uC81C\uC561"),n()()(),a(85,"tbody"),N(86,Ke,1,1,null,null,R),n(),a(88,"tfoot")(89,"tr")(90,"th",10),p(91,"\uACF5\uC81C\uD569\uACC4"),n(),a(92,"td",17)(93,"div"),S(94,Qe,1,1,"span",18),p(95),n()()()()()()(),a(96,"div",19)(97,"span",20),p(98,"\uC2E4\uC9C0\uAE09\uC561(\uC9C0\uAE09\uCD1D\uC561-\uACF5\uC81C\uD569\uACC4)"),n(),a(99,"strong",21),S(100,Ge,1,1,"span",22),p(101),n()()()(),a(102,"div",23)(103,"div",24),S(104,Xe,2,12),n(),a(105,"div",25),S(106,Je,4,5)(107,Ze,2,2,"ui-button",26),n()()()()}t&2&&(s(),m("form",r.payslipForm)("useSubmit",!1),s(5),x(r.title),s(),m("icon","pi-file-pdf")("rounded",!0)("text",!0)("severity","primary")("title","PDF \uB2E4\uC6B4\uB85C\uB4DC"),s(16),x(r.user==null?null:r.user.employeeName),s(4),x(ue(28,29,r.ngDate(r.payslip.joinYmd),"yyyy-MM-dd")),s(6),x(r.payslip.rankCodeName),s(4),x(ue(38,32,r.ngDate(r.payslip.payslipPaymentYmd),"yyyy-MM-dd")),s(2),f(r.payslip.payslipNote?39:-1),s(),f(r.prevPayslip?40:-1),s(15),x(r.salaryTypeA00code.label),s(4),$(r.payslip.payslipSalaryDetailList),s(7),K("salary-detail__content-compare--active",r.isShowCompareActive),s(),f(r.isShowCompareActive?67:-1),s(),P(" ",r.numberWithCommas(r.payslip.totalAmountA00)," "),s(14),x(r.salaryTypeB00code.label),s(4),$(r.payslip.payslipSalaryDetailList),s(7),K("salary-detail__content-compare--active",r.isShowCompareActive),s(),f(r.isShowCompareActive?94:-1),s(),P(" ",r.numberWithCommas(r.payslip.totalAmountB00)," "),s(5),f(r.isShowCompareActive?100:-1),s(),P(" ",r.numberWithCommas(r.payslip.totalAmount),"\uC6D0 "),s(3),f(r.payslipList.length>0?104:-1),s(2),f(r.payslip.employeeId==(r.user==null?null:r.user.employeeId)?106:-1),s(),f(r.isSystemAdmin||r.payslip.employeeId==(r.user==null?null:r.user.employeeId)?107:-1))},dependencies:[G,ve,U,j,De],styles:[".salary-detail__top[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:2rem;padding:1rem;background-color:var(--surface-50)}.salary-detail__top__item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.salary-detail__top__item[_ngcontent-%COMP%] + .salary-detail__top__item[_ngcontent-%COMP%]{margin-left:.75rem;padding-left:.75rem;border-left:1px solid var(--surface-200)}.salary-detail__content-compare[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;width:1rem;height:1rem;margin-left:.3125rem;border-radius:50%;color:var(--surface-0);font-weight:400}.salary-detail__content-compare--active[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.salary-detail__content-compare-text[_ngcontent-%COMP%]{font-weight:400;font-size:.875rem}.salary-detail__content-compare.plus[_ngcontent-%COMP%]{background-color:var(--primary-color)}.salary-detail__content-compare.minus[_ngcontent-%COMP%]{background-color:var(--red-500)}.salary-detail__buttons[_ngcontent-%COMP%]{display:flex;position:sticky;bottom:-1rem;justify-content:space-between;gap:1rem;margin-top:1rem;padding:.5rem 0;background-color:var(--surface-0)}.salary-detail__buttons__prevnext[_ngcontent-%COMP%], .salary-detail__buttons__crud[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}"]});let o=l;return o})();var k=class extends Fe{};H([Q(({value:o})=>Y(o)?Number(o):null)],k.prototype,"payslipId",void 0);H([Q(({value:o})=>Y(o)?Number(o):null)],k.prototype,"userId",void 0);H([Q(({value:o})=>Y(o)?Number(o):null)],k.prototype,"employeeId",void 0);H([Q(({value:o})=>Y(o)?Number(o):null)],k.prototype,"workHistoryId",void 0);function tt(o,l){if(o&1){let i=A();a(0,"tr")(1,"th",4),p(2),n(),a(3,"td")(4,"ui-text-field",15),C("input",function(t){let r=c(i).$implicit,v=u();return d(v.onSalaryAmountChange(t,r.value,"salaryAmount"))}),n()()()}if(o&2){let i=l.$implicit,e=u();s(2),x(i.label),s(2),m("align","right")("control",e.getPayslipSalaryDetailControl(i.value,"salaryAmount"))}}function it(o,l){if(o&1){let i=A();a(0,"tr")(1,"th",4),p(2),n(),a(3,"td")(4,"ui-text-field",15),C("input",function(t){let r=c(i).$implicit,v=u();return d(v.onSalaryAmountChange(t,r.value,"salaryAmount"))}),n()()()}if(o&2){let i=l.$implicit,e=u();s(2),x(i.label),s(2),m("align","right")("control",e.getPayslipSalaryDetailControl(i.value,"salaryAmount"))}}function at(o,l){if(o&1){let i=A();a(0,"ui-button",16),C("click",function(){c(i);let t=u();return d(t.goToPayslip())}),p(1," \uB4A4\uB85C\uAC00\uAE30 "),n()}o&2&&m("text",!0)}var z=class z extends I{constructor(l,i,e,t,r,v){super(),this.fb=l,this.config=i,this.dialogRef=e,this.messageService=t,this.workHistoryService=r,this.payslipService=v,this.title="0000\uB144 00\uC6D4 \uAE09\uC5EC\uBA85\uC138\uC11C"}get payslip(){return this.config.data.payslip}get workHistoryId(){return this.config.data.workHistoryId}get salaryTypeA00code(){return this.config.data.salaryTypecodes.find(l=>l.value==="A00")}get salaryTypeB00code(){return this.config.data.salaryTypecodes.find(l=>l.value==="B00")}get salaryAmountA00Codes(){return this.config.data.salaryAmountA00Codes}get salaryAmountB00Codes(){return this.config.data.salaryAmountB00Codes}get rankCodes(){return this.config.data.rankCodes}get payslipSalaryDetailList(){return this.payslipForm.get("payslipSalaryDetailList")}get action(){return this.config.data.action}ngOnInit(){this.initForm(),L(this.payslip)?this.getWorkHistory():(this.getWorkHistory(),this.setFormValue(),this.setTitle(this.payslip.payslipPaymentYmd))}initForm(){this.payslipForm=this.fb.group({userId:[this.user?.userId],payslipId:[""],workHistoryId:[this.workHistoryId],payslipPaymentYmd:["",[ne.required]],payslipNote:["",[ne.maxLength(255)]],rankCode:["",[ne.required]],payslipSalaryDetailList:this.fb.array([])}),[...this.salaryAmountA00Codes,...this.salaryAmountB00Codes].forEach(l=>{this.payslipSalaryDetailList.push(this.fb.group({salaryTypeCode:[l.value.startsWith("A")?this.salaryTypeA00code.value:l.value.startsWith("B")?this.salaryTypeB00code.value:""],salaryAmountCode:[l.value],salaryAmount:[""]}))})}onSubmit(l){return F(this,null,function*(){let i=B(l.payslipId)||this.action===this.actions.COPY?"\uB4F1\uB85D":"\uC218\uC815";(yield this.messageService.confirm1(`${i}\uD558\uC2DC\uACA0\uC5B4\uC694?`))&&(B(l.payslipId)||this.action===this.actions.COPY?this.payslipService.addPayslip$(l).subscribe(t=>{this.messageService.toastSuccess(`\uC815\uC0C1\uC801\uC73C\uB85C ${i}\uB418\uC5C8\uC5B4\uC694.`),this.dialogRef.close({action:this.actions.SAVE})}):this.payslipService.updatePayslip$(l).subscribe(t=>{this.messageService.toastSuccess(`\uC815\uC0C1\uC801\uC73C\uB85C ${i}\uB418\uC5C8\uC5B4\uC694.`),this.dialogRef.close({action:this.actions.SAVE})}))})}onPayslipPaymentYmdChange(l){this.setTitle(l)}onSalaryAmountChange(l,i,e){let t=l.target.value;this.getPayslipSalaryDetailControl(i,e).patchValue(this.numberWithCommas(t))}getPayslipSalaryDetailControl(l,i){return this.payslipForm.get("payslipSalaryDetailList").controls.find(r=>r.value.salaryAmountCode===l)?.get(i)}goToPayslip(){let l=this.payslipForm.get("payslipId").value,i=this.payslipForm.get("payslipPaymentYmd").value;this.dialogRef.close({action:this.actions.RELOAD,data:{payslipId:l,payslipPaymentYmd:i}})}getWorkHistory(){this.workHistoryService.getWorkHistory$(this.user?.employeeId,this.workHistoryId).subscribe(l=>{L(this.payslip)&&this.payslipForm.get("rankCode").patchValue(l.workHistory.rankCode),this.joinYmd=g(l.workHistory.joinYmd).format("YYYY-MM-DD")})}setFormValue(){this.payslipForm.patchValue(M(V({},this.payslip),{payslipPaymentYmd:g(this.payslip.payslipPaymentYmd).format("YYYY-MM-DD")}));for(let l of this.payslipSalaryDetailList.controls)l.get("salaryAmount").patchValue(this.numberWithCommas(l.value.salaryAmount))}setTitle(l){if(B(l))this.title=`0000\uB144 00\uC6D4 \uAE09\uC5EC\uBA85\uC138\uC11C (${this.payslip.companyName})`;else{let i=g(l).format("YYYY\uB144 MM\uC6D4");this.title=`${i} \uAE09\uC5EC\uBA85\uC138\uC11C (${this.payslip.companyName})`}}};z.\u0275fac=function(i){return new(i||z)(y(O),y(X),y(J),y(te),y(oe),y(D))},z.\u0275cmp=E({type:z,selectors:[["modal-save-salary-payslip"]],standalone:!0,features:[b,w],decls:86,vars:15,consts:[[1,"mt-2"],[3,"submit","form"],[1,"ui-basic-table","type1"],[2,"width","25%"],["scope","row"],[3,"control","data"],[3,"select","clear","clearClick","control","dateFormat","placeholder","showErrorMessage"],["colspan","3"],[3,"control","placeholder"],[1,"flex"],[1,"ui-basic-table","type2","flex-grow-1","mt-4"],[2,"width","50%"],["scope","col","colspan","2"],["scope","col"],["button","",3,"text"],[3,"input","align","control"],["button","",3,"click","text"]],template:function(i,e){i&1&&(a(0,"h2",0),p(1),n(),a(2,"layout-page-description")(3,"ul")(4,"li"),p(5,"\uAE09\uC5EC\uBA85\uC138\uC11C\uB97C \uC785\uB825\uD560 \uC218 \uC788\uC5B4\uC694."),n(),a(6,"li"),p(7,"\uD68C\uC0AC\uC5D0\uC11C \uBC1B\uC740 \uAE09\uC5EC\uBA85\uC138\uC11C\uC5D0\uC11C, \uC77C\uBD80 \uC874\uC7AC\uD558\uC9C0 \uC54A\uB294 \uC9C0\uAE09\uC561 \uBC0F \uACF5\uC81C\uC561 \uD56D\uBAA9\uC740 \uC785\uB825\uD558\uC9C0 \uC54A\uACE0 \uBE44\uC6CC\uB450\uC2DC\uBA74 \uB3FC\uC694."),n(),a(8,"li"),p(9,"\uC608) \uAE09\uC5EC\uBA85\uC138\uC11C\uC5D0 \uB18D\uD2B9\uC138 \uD56D\uBAA9 \uC874\uC7AC\uD558\uB098 \uD574\uB2F9\uC0AC\uD56D \uC5C6\uC74C: 0\uC744 \uC785\uB825"),n(),a(10,"li"),p(11,"\uC608) \uAE09\uC5EC\uBA85\uC138\uC11C\uC5D0 \uB18D\uD2B9\uC138 \uD56D\uBAA9 \uC874\uC7AC\uD558\uC9C0 \uC54A\uC74C: \uC785\uB825\uD558\uC9C0 \uC54A\uACE0 \uBE44\uC6CC\uB450\uAE30"),n()()(),a(12,"ui-form",1),C("submit",function(r){return e.onSubmit(r)}),a(13,"div",2)(14,"table")(15,"caption"),p(16,"\uAE09\uC5EC\uBA85\uC138\uC11C \uAE30\uBCF8 \uC815\uBCF4"),n(),a(17,"colgroup"),h(18,"col",3)(19,"col",3)(20,"col",3)(21,"col",3),n(),a(22,"tbody")(23,"tr")(24,"th",4),p(25,"\uC131\uBA85"),n(),a(26,"td"),p(27),n(),a(28,"th",4),p(29,"\uC785\uC0AC\uC77C\uC790"),n(),a(30,"td"),p(31),n()(),a(32,"tr")(33,"th",4),p(34,"\uC9C1\uC704"),n(),a(35,"td"),h(36,"ui-dropdown",5),n(),a(37,"th",4),p(38,"\uAE09\uC5EC\uC9C0\uAE09\uC77C"),n(),a(39,"td")(40,"ui-date-field",6),C("select",function(r){return e.onPayslipPaymentYmdChange(r)})("clear",function(){return e.onPayslipPaymentYmdChange()})("clearClick",function(){return e.onPayslipPaymentYmdChange()}),n()()(),a(41,"tr")(42,"th",4),p(43,"\uBE44\uACE0"),n(),a(44,"td",7),h(45,"ui-textarea",8),n()()()()(),a(46,"div",9)(47,"div",10)(48,"table")(49,"caption"),p(50,"\uAE09\uC5EC\uBA85\uC138\uC11C \uC138\uBD80 \uB0B4\uC5ED - \uC9C0\uAE09(\uC9C0\uAE09\uB0B4\uC5ED, \uC9C0\uAE09\uC561)"),n(),a(51,"colgroup"),h(52,"col",11)(53,"col",11),n(),a(54,"thead")(55,"tr")(56,"th",12),p(57,"\uC9C0\uAE09"),n()(),a(58,"tr")(59,"th",13),p(60),n(),a(61,"th",13),p(62,"\uC9C0\uAE09\uC561"),n()()(),a(63,"tbody"),N(64,tt,5,3,"tr",null,R),n()()(),a(66,"div",10)(67,"table")(68,"caption"),p(69,"\uAE09\uC5EC\uBA85\uC138\uC11C \uC138\uBD80 \uB0B4\uC5ED - \uACF5\uC81C(\uACF5\uC81C\uB0B4\uC5ED, \uACF5\uC81C\uC561)"),n(),a(70,"colgroup"),h(71,"col",11)(72,"col",11),n(),a(73,"thead")(74,"tr")(75,"th",12),p(76,"\uACF5\uC81C"),n()(),a(77,"tr")(78,"th",13),p(79),n(),a(80,"th",13),p(81,"\uACF5\uC81C\uC561"),n()()(),a(82,"tbody"),N(83,it,5,3,"tr",null,R),n()()()(),S(85,at,2,1,"ui-button",14),n()),i&2&&(s(),P(" ",e.title,`
`),s(11),m("form",e.payslipForm),s(15),x(e.user==null?null:e.user.employeeName),s(4),x(e.joinYmd),s(5),m("control",e.payslipForm.get("rankCode"))("data",e.rankCodes),s(4),m("control",e.payslipForm.get("payslipPaymentYmd"))("dateFormat","yy-mm-dd")("placeholder","\uC608) 2024-03-01")("showErrorMessage",!1),s(5),m("control",e.payslipForm.get("payslipNote"))("placeholder","\uD2B9\uC774\uC0AC\uD56D\uC774 \uC788\uB294 \uACBD\uC6B0 \uAE30\uC785\uD574\uC8FC\uC138\uC694. \uC608) \uC5F0\uBD09\uC778\uC0C1"),s(15),x(e.salaryTypeA00code.label),s(4),$(e.salaryAmountA00Codes),s(15),x(e.salaryTypeB00code.label),s(4),$(e.salaryAmountB00Codes),s(2),f(e.action===e.actions.UPDATE||e.action===e.actions.COPY?85:-1))},dependencies:[G,ee,U,ie,ke,ae,Ie,j,re]});var q=z;H([Te(k)],q.prototype,"onSubmit",null);var rt=()=>[12,24,36];function lt(o,l){o&1&&h(0,"ui-skeleton")(1,"ui-skeleton")(2,"ui-skeleton")}function st(o,l){if(o&1&&(a(0,"div",5),h(1,"ui-text-field",7),n()),o&2){let i=u(2);s(),m("control",i.searchForm.get("quitYmd"))("label","\uD1F4\uC0AC\uC77C\uC790")("readonly",!0)}}function pt(o,l){if(o&1){let i=A();a(0,"ui-table",2,0),C("refresh",function(){c(i);let t=u();return d(t.onRefresh())})("rowSelect",function(t){c(i);let r=u();return d(r.onRowSelect(t))}),a(2,"ui-form",3),C("submit",function(t){c(i);let r=u();return d(r.onSubmit(t))}),a(3,"div",4)(4,"div",5)(5,"ui-date-field",6),C("select",function(){c(i);let t=u();return d(t.onSearchFormSubmit())})("clear",function(){c(i);let t=u();return d(t.onSearchFormSubmit())})("clearClick",function(){c(i);let t=u();return d(t.onSearchFormSubmit())}),n()(),a(6,"div",5)(7,"ui-date-field",6),C("select",function(){c(i);let t=u();return d(t.onSearchFormSubmit())})("clear",function(){c(i);let t=u();return d(t.onSearchFormSubmit())})("clearClick",function(){c(i);let t=u();return d(t.onSearchFormSubmit())}),n()(),a(8,"div",5),h(9,"ui-text-field",7),n(),S(10,st,2,3,"div",5),n()(),a(11,"ui-button",8),C("click",function(){c(i);let t=u();return d(t.addPayslip())}),n()()}if(o&2){let i=u();m("title",i.tableTitle)("text",i.tableText)("useAdd",!1)("useRemove",!1)("useExportExcel",!0)("emptymessage","\uAE09\uC5EC\uBA85\uC138\uC11C\uAC00 \uC5C6\uC5B4\uC694. \uAE09\uC5EC\uBA85\uC138\uC11C\uB97C \uB4F1\uB85D\uD574\uBCF4\uC138\uC694!")("cols",i.cols)("rows",12)("rowsPerPageOptions",fe(37,rt))("data",i.payslipResponse==null?null:i.payslipResponse.payslipList)("dataKey","payslipId")("selection",i.selection)("paginator",!0)("fileName",i.fileName)("excelHeader",i.excelHeader),s(2),m("form",i.searchForm)("useSubmit",!1),s(3),m("control",i.searchForm.get("payslipPaymentYYYY"))("label","\uAE09\uC5EC\uBA85\uC138\uC11C \uC9C0\uAE09 \uC5F0\uB3C4\uB85C \uAC80\uC0C9")("view","year")("dateFormat","yy")("placeholder","YYYY")("readonlyInput",!0),s(2),m("control",i.searchForm.get("payslipPaymentMM"))("label","\uAE09\uC5EC\uBA85\uC138\uC11C \uC9C0\uAE09 \uC6D4\uB85C \uAC80\uC0C9")("view","month")("dateFormat","mm")("placeholder","MM")("readonlyInput",!0),s(2),m("control",i.searchForm.get("joinYmd"))("label","\uC785\uC0AC\uC77C\uC790")("readonly",!0),s(),f(i.searchForm.get("quitYmd").value?10:-1),s(),m("size","small")("icon","pi-plus")("label","\uAE09\uC5EC\uBA85\uC138\uC11C \uB4F1\uB85D")("outlined",!0)}}var Ve=(()=>{let l=class l extends I{constructor(e,t,r,v,_,se){super(),this.fb=e,this.route=t,this.payslipStore=r,this.payslipService=v,this.dialogService=_,this.loadingService=se,this.refresh=new ye,this.excelHeader=[{totalAmountA00:"\uC9C0\uAE09\uCD1D\uC561",_numberFormat:!0},{totalAmountB00:"\uACF5\uC81C\uD569\uACC4",_numberFormat:!0},{totalAmount:"\uC2E4\uC9C0\uAE09\uC561(\uC9C0\uAE09\uCD1D\uC561-\uACF5\uC81C\uD569\uACC4)",_numberFormat:!0},{payslipPaymentYmd:"\uC9C0\uAE09\uC77C\uC790"},{payslipNote:"\uBE44\uACE0"}],this.cols=[{field:"totalAmountA00",header:"\uC9C0\uAE09\uCD1D\uC561",valueGetter:T=>`${this.numberWithCommas(T.totalAmountA00)}\uC6D0`},{field:"totalAmountB00",header:"\uACF5\uC81C\uD569\uACC4",valueGetter:T=>`${this.numberWithCommas(T.totalAmountB00)}\uC6D0`},{field:"totalAmount",header:"\uC2E4\uC9C0\uAE09\uC561(\uC9C0\uAE09\uCD1D\uC561-\uACF5\uC81C\uD569\uACC4)",valueGetter:T=>`<strong>${this.numberWithCommas(T.totalAmount)}\uC6D0</strong>`},{field:"payslipPaymentYmd",header:"\uC9C0\uAE09\uC77C\uC790",valueGetter:T=>`${g(T.payslipPaymentYmd).format("YYYY\uB144 MM\uC6D4 DD\uC77C")}`},{field:"payslipNote",header:"\uBE44\uACE0"}]}get workHistoryId(){return this.payslipStore.select("payslipWorkHistoryId").value}get payslipResponse(){return this.payslipStore.select("payslipResponse").value?.[this.workHistoryId]?.data??null}get payslipResponseDataLoad(){return this.payslipStore.select("payslipResponse").value?.[this.workHistoryId]?.dataLoad??!1}get workHistoryList(){return this.payslipStore.select("payslipWorkHistoryList").value}get activeIndex(){return this.payslipStore.select("payslipWorkHistoryTabIndex").value}ngOnInit(){this.route.data.subscribe(({code:e})=>{this.salaryTypecodes=e.SALARY_TYPE_00,this.salaryAmountA00Codes=e.SALARY_AMOUNT_A00,this.salaryAmountB00Codes=e.SALARY_AMOUNT_B00,this.rankCodes=e.RANK_00}),this.fileName=`\uAE09\uC5EC\uBA85\uC138\uC11C \uBAA9\uB85D(${this.user?.employeeName})`,this.searchForm=this.fb.group({joinYmd:[""],quitYmd:[""],payslipPaymentYYYY:[""],payslipPaymentMM:[""]}),this.payslipStore.select("payslipWorkHistoryId").asObservable().subscribe(e=>{e&&(this.searchForm.get("joinYmd").patchValue(this.workHistoryList[this.activeIndex]?.joinYmd),this.searchForm.get("quitYmd").patchValue(this.workHistoryList[this.activeIndex]?.quitYmd),this.payslipResponseDataLoad||this.listPayslip({workHistoryId:e,userId:this.user?.userId}))})}listPayslip(e){let{workHistoryId:t}=e;this.payslipService.listPayslip$(e).subscribe(r=>{let v=this.payslipStore.select("payslipResponse").value;this.payslipStore.update("payslipResponse",M(V({},v),{[t]:{data:r,dataLoad:!0}}))})}getPayslip(e){let t=setTimeout(()=>this.loadingService.setLoading(!0),500);this.payslipService.getPayslip$({payslipId:e.payslipId,payslipPaymentYmd:e.payslipPaymentYmd,workHistoryId:this.workHistoryId,userId:this.user?.userId}).subscribe(r=>{clearTimeout(t),this.loadingService.setLoading(!1),this.dialogService.open(Le,{focusOnShow:!1,header:"\uAE09\uC5EC\uBA85\uC138\uC11C \uC870\uD68C",width:"1000px",data:M(V({},r),{salaryTypecodes:this.salaryTypecodes,salaryAmountA00Codes:this.salaryAmountA00Codes,salaryAmountB00Codes:this.salaryAmountB00Codes})})?.onClose.subscribe(_=>{L(_)||(_.action===this.actions.SAVE?this.listPayslip({workHistoryId:this.workHistoryId,userId:this.user?.userId}):_.action===this.actions.RELOAD?this.getPayslip({payslipId:_.data.payslipId,payslipPaymentYmd:_.data.payslipPaymentYmd}):_.action===this.actions.UPDATE?this.updateArticle(_.action,_.data):_.action===this.actions.COPY&&this.updateArticle(_.action,_.data))})})}onRowSelect(e){this.getPayslip({payslipId:e.data.payslipId,payslipPaymentYmd:e.data.payslipPaymentYmd})}onRefresh(){this.listPayslip({workHistoryId:this.workHistoryId,userId:this.user?.userId}),this.refresh.emit()}onSearchFormSubmit(){this.listPayslip(M(V({},this.searchForm.value),{workHistoryId:this.workHistoryId,userId:this.user?.userId}))}onSubmit(e){this.listPayslip(e)}addPayslip(){this.dialogService.open(q,{focusOnShow:!1,header:"\uAE09\uC5EC\uBA85\uC138\uC11C \uB4F1\uB85D\uD558\uAE30",width:"1000px",data:{workHistoryId:this.workHistoryId,salaryTypecodes:this.salaryTypecodes,salaryAmountA00Codes:this.salaryAmountA00Codes,salaryAmountB00Codes:this.salaryAmountB00Codes,rankCodes:this.rankCodes}}).onClose.subscribe(t=>{L(t)||t.action===this.actions.SAVE&&this.listPayslip({workHistoryId:this.workHistoryId,userId:this.user?.userId})})}updateArticle(e,t){let r="";e===this.actions.UPDATE?r="\uC218\uC815":e===this.actions.COPY&&(r="\uB4F1\uB85D"),this.dialogService.open(q,{focusOnShow:!1,header:`\uAE09\uC5EC\uBA85\uC138\uC11C ${r}\uD558\uAE30`,width:"1000px",data:{action:e,payslip:t,workHistoryId:this.workHistoryId,salaryTypecodes:this.salaryTypecodes,salaryAmountA00Codes:this.salaryAmountA00Codes,salaryAmountB00Codes:this.salaryAmountB00Codes,rankCodes:this.rankCodes}}).onClose.subscribe(_=>{L(_)||(_.action===this.actions.SAVE?this.listPayslip({workHistoryId:this.workHistoryId,userId:this.user?.userId}):_.action===this.actions.RELOAD&&this.getPayslip({payslipId:_.data.payslipId,payslipPaymentYmd:_.data.payslipPaymentYmd}))})}};l.\u0275fac=function(t){return new(t||l)(y(O),y(xe),y(le),y(D),y(Pe),y(Ee))},l.\u0275cmp=E({type:l,selectors:[["salary-payslip-list"]],inputs:{tableTitle:"tableTitle",tableText:"tableText"},outputs:{refresh:"refresh"},standalone:!0,features:[b,w],decls:2,vars:1,consts:[["table",""],["first","",3,"title","text","useAdd","useRemove","useExportExcel","emptymessage","cols","rows","rowsPerPageOptions","data","dataKey","selection","paginator","fileName","excelHeader"],["first","",3,"refresh","rowSelect","title","text","useAdd","useRemove","useExportExcel","emptymessage","cols","rows","rowsPerPageOptions","data","dataKey","selection","paginator","fileName","excelHeader"],["top","",3,"submit","form","useSubmit"],[1,"grid"],[1,"col-3"],[3,"select","clear","clearClick","control","label","view","dateFormat","placeholder","readonlyInput"],[3,"control","label","readonly"],["buttons","",3,"click","size","icon","label","outlined"]],template:function(t,r){t&1&&S(0,lt,3,0)(1,pt,12,38,"ui-table",1),t&2&&f(r.payslipResponseDataLoad?1:0)},dependencies:[ee,U,Z,Be,j,ie,ae]});let o=l;return o})();var ut=o=>({menuId:o});function mt(o,l){o&1&&h(0,"ui-skeleton")(1,"ui-skeleton")(2,"ui-skeleton")}function ct(o,l){if(o&1){let i=A();a(0,"ui-tab",2),C("activeIndexChange",function(t){c(i);let r=u();return d(r.onChange(t))}),a(1,"salary-payslip-list",3),C("refresh",function(){c(i);let t=u();return d(t.onRefresh())}),n()()}if(o&2){let i=u();m("vertical",!0)("type","type2")("tabs",i.workHistoryTabList)("activeIndex",i.activeIndex),s(),m("tableTitle",i.payslipTableTitle)("tableText",i.payslipTableText)}}var ni=(()=>{let l=class l extends I{constructor(e,t,r){super(),this.payslipStore=e,this.payslipService=t,this.workHistoryService=r,this.tabs=[],this.activeIndex=0}get payslipTableTitle(){return this.payslipStore.select("payslipTableTitle").value}get payslipTableText(){return this.payslipStore.select("payslipTableText").value}get payslipResponse(){return this.payslipStore.select("payslipResponse")}get workHistoryTabList(){return this.payslipStore.select("payslipWorkHistoryTabList").value}get workHistoryListDataLoad(){return this.payslipStore.select("payslipWorkHistoryTabList").value?.find(t=>t.key===this.activeWorkHistoryId)?.dataLoad??!1}get workHistoryList(){return this.payslipStore.select("payslipWorkHistoryList").value}ngOnInit(){return F(this,null,function*(){let e=yield de(this.workHistoryService.getCurrentWorkHistory$(this.user?.employeeId));this.currentWorkHistoryId=e?.workHistory?.workHistoryId,this.payslipService.setWorkHistoryId(this.currentWorkHistoryId),this.activeWorkHistoryId=this.currentWorkHistoryId,this.user&&this.listWorkHistory()})}onChange(e){this.activeIndex=e.index,this.activeWorkHistoryId=Number(e.activeKey),this.payslipService.setWorkHistoryId(this.activeWorkHistoryId),this.setPayslipTableContent()}onRefresh(){this.listWorkHistory()}listWorkHistory(){this.workHistoryService.listWorkHistory$({employeeId:this.user?.employeeId}).subscribe(e=>{this.payslipStore.update("payslipWorkHistoryList",e.workHistoryList),this.payslipStore.update("payslipWorkHistoryTabList",e.workHistoryList.map(t=>({title:t.companyName,key:t.workHistoryId,dataLoad:!0}))),this.setPayslipTableContent()})}setPayslipTableContent(){this.payslipResponse.asObservable().subscribe(e=>{if(B(e))return;let t=e[this.activeWorkHistoryId]?.data.payslipList[0];this.payslipService.setPayslipTableContent(this.activeIndex,t)})}};l.\u0275fac=function(t){return new(t||l)(y(le),y(D),y(oe))},l.\u0275cmp=E({type:l,selectors:[["view-salary-payslip"]],standalone:!0,features:[b,w],decls:11,vars:5,consts:[[3,"routerLink","queryParams"],[3,"vertical","type","tabs","activeIndex"],[3,"activeIndexChange","vertical","type","tabs","activeIndex"],[3,"refresh","tableTitle","tableText"]],template:function(t,r){t&1&&(a(0,"layout-page-description")(1,"ul")(2,"li"),p(3,"\uD68C\uC0AC\uBCC4 \uAE09\uC5EC\uBA85\uC138\uC11C\uB97C \uC870\uD68C/\uC785\uB825\uD560 \uC218 \uC788\uC5B4\uC694."),n(),a(4,"li"),p(5,"\uD68C\uC0AC \uC785\uB825\uC740 "),a(6,"a",0),p(7,"\uB9C8\uC774\uD398\uC774\uC9C0"),n(),p(8," > \uADFC\uBB34\uC774\uB825 \uC815\uBCF4\uC5D0\uC11C \uD574\uC8FC\uC2DC\uBA74 \uB3FC\uC694."),n()()(),S(9,mt,3,0)(10,ct,2,6,"ui-tab",1)),t&2&&(s(6),m("routerLink","/hm/my-info")("queryParams",Se(3,ut,r.getMenuIdByMenuUrl("/hm/my-info"))),s(3),f(r.workHistoryListDataLoad?10:9))},dependencies:[ge,Ae,re,Ve,Z,we]});let o=l;return o})();export{ni as SalaryPayslipComponent};
