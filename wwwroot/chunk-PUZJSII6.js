import{a as j,b as N}from"./chunk-23KT3LSC.js";import{b as Te}from"./chunk-RNF5X5JX.js";import{a as ke,b as Ye,c as Be}from"./chunk-GZI5C7JE.js";import{F as le,f as F,k as ne,l as R,m as U,n as M,o as f,p as ae,q as re,r as se,v as He,w as Ie,x as Fe,y as De}from"./chunk-GGQPHCKP.js";import{A as d,Ac as A,B as m,Ea as b,Ec as L,F as S,Fc as te,Ga as fe,Ic as ge,L as s,M as p,Rb as y,U as H,Vc as I,W as D,Wb as Y,Wc as ie,Xb as be,Y as r,_b as ee,ba as T,bb as ye,c as Q,ca as Ce,cc as Ve,da as he,ea as ve,eb as _e,f as pe,fa as l,ga as c,gd as oe,ha as v,jd as E,kb as Z,la as k,ma as h,na as u,nb as xe,qb as Se,r as z,ra as J,sa as G,ta as X,u as de,uc as B,va as V,w as x,wc as we,z as K}from"./chunk-D4IPV4YQ.js";import"./chunk-M6OTSRMF.js";import"./chunk-FK6H3RFT.js";import{a as _,b as w,f as g}from"./chunk-USDYGGWM.js";var O=class extends Be{};Q([ke(({value:a})=>be(a)?Number(a):null)],O.prototype,"vacationUseCount",void 0);var $=class ${constructor(o,i,t,e,n){this.fb=o,this.route=i,this.messageService=t,this.vacationStore=e,this.vacationService=n,this.detail=null,this.useRemove=!0,this.refresh=new S,this.remove=new S,this.close=new S}get workHistoryId(){return this.vacationStore.select("vacationWorkHistoryId").value}ngOnInit(){this.detailForm=this.fb.group({vacationId:[""],workHistoryId:[""],vacationTypeCode:["",[f.required]],vacationStartYmd:["",[f.required]],vacationEndYmd:["",[f.required]],vacationUseCount:["",[f.numeric]],vacationContent:["",f.maxLength(100)]}),this.route.data.subscribe(({code:o})=>{this.vacationTypeCodes=o.VACATION_TYPE_00}),this.vacationStore.select("vacationWorkHistoryId").asObservable().subscribe(o=>{o&&this.detailForm.get("workHistoryId").patchValue(o)})}ngOnChanges(o){if(o.detail&&this.detailForm){if(this.useRemove=!0,ee(o.detail.currentValue)){this.useRemove=!1,this.detailForm.reset({workHistoryId:this.workHistoryId});return}this.detailForm.patchValue(w(_({},this.detail),{workHistoryId:this.workHistoryId}))}}isValid(){let o=this.detailForm.get("vacationStartYmd").value,i=this.detailForm.get("vacationEndYmd").value;return y(o).isAfter(i)?(this.messageService.toastError("\uD734\uAC00 \uC2DC\uC791\uC77C\uC790\uB294 \uC885\uB8CC\uC77C\uC790\uBCF4\uB2E4 \uD074 \uC218 \uC5C6\uC5B4\uC694."),!1):!0}onSubmit(o){return g(this,null,function*(){if(!this.isValid())return;let i=Y(o.vacationId)?"\uB4F1\uB85D":"\uC218\uC815";(yield this.messageService.confirm1(`\uD734\uAC00\uB97C ${i}\uD558\uC2DC\uACA0\uC5B4\uC694?`))&&(Y(o.vacationId)?this.vacationService.addVacation$(o).subscribe(e=>{this.messageService.toastSuccess(`\uC815\uC0C1\uC801\uC73C\uB85C ${i}\uB418\uC5C8\uC5B4\uC694.`),this.detailForm.get("vacationId").patchValue(e.vacation.vacationId),this.refresh.emit(e.vacation.workHistoryId)}):this.vacationService.updateVacation$(o).subscribe(()=>{this.messageService.toastSuccess(`\uC815\uC0C1\uC801\uC73C\uB85C ${i}\uB418\uC5C8\uC5B4\uC694.`),this.refresh.emit(o.workHistoryId)}))})}onRemove(o){return g(this,null,function*(){(yield this.messageService.confirm2("\uD734\uAC00\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC5B4\uC694?<br>\uC774 \uC791\uC5C5\uC740 \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC5B4\uC694."))&&this.vacationService.removeVacation$(this.detail.vacationId).subscribe(()=>{this.messageService.toastSuccess("\uC815\uC0C1\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC5B4\uC694."),this.remove.emit()})})}onClose(){this.close.emit()}};$.\u0275fac=function(i){return new(i||$)(p(I),p(Z),p(E),p(j),p(N))},$.\u0275cmp=x({type:$,selectors:[["human-vacation-detail"]],inputs:{detail:"detail"},outputs:{refresh:"refresh",remove:"remove",close:"close"},standalone:!0,features:[K,b],decls:15,vars:23,consts:[[3,"submit","remove","close","form","useRemove"],[3,"control"],[3,"text"],[1,"grid","mt-2"],[1,"col"],[3,"control","label","data"],[3,"control","label","dateFormat","placeholder"],[3,"control","label","placeholder","tooltip","tooltipPosition"],[1,"col-12"],[3,"control","label"]],template:function(i,t){i&1&&(l(0,"ui-split-form",0),h("submit",function(n){return t.onSubmit(n)})("remove",function(n){return t.onRemove(n)})("close",function(){return t.onClose()}),v(1,"ui-hidden-field",1)(2,"ui-hidden-field",1)(3,"ui-content-title",2),l(4,"div",3)(5,"div",4),v(6,"ui-dropdown",5),c(),l(7,"div",4),v(8,"ui-date-field",6),c(),l(9,"div",4),v(10,"ui-date-field",6),c(),l(11,"div",4),v(12,"ui-text-field",7),c(),l(13,"div",8),v(14,"ui-textarea",9),c()()()),i&2&&(r("form",t.detailForm)("useRemove",t.useRemove),s(),r("control",t.detailForm.get("vacationId")),s(),r("control",t.detailForm.get("workHistoryId")),s(),r("text","\uD734\uAC00 \uC815\uBCF4"),s(3),r("control",t.detailForm.get("vacationTypeCode"))("label","\uD734\uAC00 \uAD6C\uBD84")("data",t.vacationTypeCodes),s(2),r("control",t.detailForm.get("vacationStartYmd"))("label","\uD734\uAC00 \uC2DC\uC791\uC77C\uC790")("dateFormat","yymmdd")("placeholder","YYYYMMDD"),s(2),r("control",t.detailForm.get("vacationEndYmd"))("label","\uD734\uAC00 \uC885\uB8CC\uC77C\uC790")("dateFormat","yymmdd")("placeholder","YYYYMMDD"),s(2),r("control",t.detailForm.get("vacationUseCount"))("label","\uD734\uAC00 \uC0AC\uC6A9\uC77C\uC218")("placeholder","\uC608) 1")("tooltip","\uBE44\uC6CC\uB450\uC2DC\uBA74 \uC790\uB3D9\uC73C\uB85C \uACC4\uC0B0\uB3FC\uC694. \uC608\uC678\uC801\uC73C\uB85C \uC9C1\uC811 \uC785\uB825\uC774 \uD544\uC694\uD55C \uACBD\uC6B0\uAC00 \uC788\uC73C\uBA74 \uC785\uB825\uD574\uC8FC\uC138\uC694.")("tooltipPosition","bottom"),s(2),r("control",t.detailForm.get("vacationContent"))("label","\uD734\uAC00 \uB0B4\uC6A9"))},dependencies:[ae,R,se,M,U,re,A]});var P=$;Q([Ye(O)],P.prototype,"onSubmit",null);var qe=["splitter"];function Oe(a,o){a&1&&v(0,"ui-skeleton")(1,"ui-skeleton")(2,"ui-skeleton")}function Pe(a,o){if(a&1){let i=k();l(0,"ui-splitter",2,0)(2,"ui-table",3,1),h("refresh",function(){d(i);let e=u();return m(e.onRefresh())})("rowSelect",function(e){d(i);let n=u();return m(n.onRowSelect(e))})("unRowSelect",function(e){d(i);let n=u();return m(n.onRowUnselect(e))}),l(4,"ui-form",4),h("submit",function(e){d(i);let n=u();return m(n.onSubmit(e))}),l(5,"div",5)(6,"div",6)(7,"div",7)(8,"ui-date-field",8),h("select",function(){d(i);let e=u();return m(e.onSearchFormSubmit())})("clear",function(){d(i);let e=u();return m(e.onSearchFormSubmit())})("clearClick",function(){d(i);let e=u();return m(e.onSearchFormSubmit())}),c(),l(9,"ui-date-field",8),h("select",function(){d(i);let e=u();return m(e.onSearchFormSubmit())})("clear",function(){d(i);let e=u();return m(e.onSearchFormSubmit())})("clearClick",function(){d(i);let e=u();return m(e.onSearchFormSubmit())}),c()()()()(),l(10,"ui-button",9),h("click",function(){d(i);let e=u();return m(e.addVacation())}),c()(),l(11,"div",10)(12,"human-vacation-detail",11),h("refresh",function(){d(i);let e=u();return m(e.onRefresh())})("remove",function(){d(i);let e=u();return m(e.onRemove())})("close",function(){d(i);let e=u();return m(e.onClose())}),c()()()}if(a&2){let i=u();r("layout","vertical"),s(2),r("title",i.tableTitle)("text",i.tableText)("useAdd",!1)("useRemove",!1)("useExportExcel",!0)("emptymessage","\uD734\uAC00 \uAE30\uB85D\uC774 \uC5C6\uC5B4\uC694. \uD734\uAC00\uB97C \uC0AC\uC6A9\uD55C \uC801\uC774 \uC788\uB2E4\uBA74 \uB4F1\uB85D\uD574\uBCF4\uC138\uC694!")("cols",i.cols)("data",i.vacationResponse.vacationList)("dataKey","vacationId")("selection",i.selection)("paginator",!0)("fileName",i.fileName)("excelHeader",i.excelHeader),s(2),r("form",i.searchForm)("useSubmit",!1),s(4),r("control",i.searchForm.get("vacationStartYmd"))("label","\uD734\uAC00 \uC2DC\uC791\uC77C\uC790\uB85C \uAC80\uC0C9")("dateFormat","yymmdd")("placeholder","YYYYMMDD")("readonlyInput",!0),s(),r("control",i.searchForm.get("vacationEndYmd"))("label","\uD734\uAC00 \uC885\uB8CC\uC77C\uC790\uB85C \uAC80\uC0C9")("dateFormat","yymmdd")("placeholder","YYYYMMDD")("readonlyInput",!0),s(),r("size","small")("icon","pi-plus")("label","\uD734\uAC00 \uB4F1\uB85D")("outlined",!0),s(2),r("detail",i.detail)}}var Re=(()=>{let o=class o extends F{constructor(t,e,n){super(),this.fb=t,this.vacationStore=e,this.vacationService=n,this.refresh=new S,this.detail=null,this.excelHeader=[{vacationTypeCodeName:"\uD734\uAC00 \uAD6C\uBD84"},{vacationStartYmd:"\uD734\uAC00 \uC2DC\uC791\uC77C\uC790"},{vacationEndYmd:"\uD734\uAC00 \uC885\uB8CC\uC77C\uC790"},{vacationUseCount:"\uD734\uAC00 \uC0AC\uC6A9\uC77C\uC218"},{vacationContent:"\uD734\uAC00 \uB0B4\uC6A9"}],this.cols=[{field:"vacationTypeCodeName",header:"\uD734\uAC00 \uAD6C\uBD84"},{field:"vacationStartYmd",header:"\uD734\uAC00 \uC2DC\uC791\uC77C\uC790"},{field:"vacationEndYmd",header:"\uD734\uAC00 \uC885\uB8CC\uC77C\uC790",valueGetter:C=>`${C.vacationEndYmd} (${C.vacationUseCount}\uC77C)`},{field:"vacationContent",header:"\uD734\uAC00 \uB0B4\uC6A9"}]}get workHistoryId(){return this.vacationStore.select("vacationWorkHistoryId").value}get vacationResponse(){return this.vacationStore.select("vacationResponse").value?.[this.workHistoryId]?.data??null}get vacationResponseDataLoad(){return this.vacationStore.select("vacationResponse").value?.[this.workHistoryId]?.dataLoad??!1}ngOnInit(){this.fileName=`\uD734\uAC00\uC0AC\uC6A9\uBAA9\uB85D(${this.user?.employeeName}, ${y().format("YYYYMMDD")})`,this.searchForm=this.fb.group({vacationStartYmd:[""],vacationEndYmd:[""]}),this.vacationStore.select("vacationWorkHistoryId").asObservable().subscribe(t=>{t&&(this.vacationResponseDataLoad||this.listVacation({workHistoryId:t,userId:this.user?.userId}),this.splitter?.hide())})}listVacation(t){let{workHistoryId:e}=t;this.vacationService.listVacation$(t).subscribe(n=>{let C=this.vacationStore.select("vacationResponse").value;this.vacationStore.update("vacationResponse",w(_({},C),{[e]:{data:n,dataLoad:!0}}))})}addVacation(){this.detail={},this.splitter.show()}onSearchFormSubmit(){this.listVacation(w(_({},this.searchForm.value),{workHistoryId:this.workHistoryId,userId:this.user?.userId}))}onSubmit(t){this.listVacation(t)}onRowSelect(t){this.vacationService.getVacation$(t.data.vacationId).subscribe(e=>{this.detail=e.vacation,this.splitter.show()})}onRowUnselect(t){this.detail={},this.splitter.hide()}onRefresh(){this.searchForm.get("vacationStartYmd").patchValue(""),this.searchForm.get("vacationEndYmd").patchValue(""),this.listVacation({workHistoryId:this.workHistoryId,userId:this.user?.userId}),this.refresh.emit()}onRemove(){this.splitter.hide(),this.listVacation({workHistoryId:this.workHistoryId,userId:this.user?.userId})}onClose(){this.splitter.hide()}};o.\u0275fac=function(e){return new(e||o)(p(I),p(j),p(N))},o.\u0275cmp=x({type:o,selectors:[["human-vacation-list"]],viewQuery:function(e,n){if(e&1&&J(qe,5),e&2){let C;G(C=X())&&(n.splitter=C.first)}},inputs:{tableTitle:"tableTitle",tableText:"tableText"},outputs:{refresh:"refresh"},standalone:!0,features:[H,b],decls:2,vars:1,consts:[["splitter",""],["table",""],[3,"layout"],["first","",3,"refresh","rowSelect","unRowSelect","title","text","useAdd","useRemove","useExportExcel","emptymessage","cols","data","dataKey","selection","paginator","fileName","excelHeader"],["top","",3,"submit","form","useSubmit"],[1,"grid"],[1,"col-fixed"],[1,"input-box"],[3,"select","clear","clearClick","control","label","dateFormat","placeholder","readonlyInput"],["buttons","",3,"click","size","icon","label","outlined"],["second",""],[3,"refresh","remove","close","detail"]],template:function(e,n){e&1&&D(0,Oe,3,0)(1,Pe,13,31,"ui-splitter",2),e&2&&T(n.vacationResponseDataLoad?1:0)},dependencies:[ie,ne,L,oe,te,B,U,P]});let a=o;return a})();var ue=(()=>{let o=class o extends Ve{constructor(){super()}init(){this.creates([{key:"holidayList",defaultValue:[]},{key:"holidayListDataLoad",defaultValue:!1}])}};o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();var ce=(()=>{let o=class o{constructor(t,e){this.http=t,this.holidayStore=e}listHoliday(t){this.http.get(`/co/holidays/${t}`).subscribe(e=>{this.holidayStore.update("holidayList",e.holidayList),this.holidayStore.update("holidayListDataLoad",!0)})}getHoliday$(t,e){return this.http.get(`/co/holidays/${t}/${e}`)}addHoliday$(t){let{userId:e}=t;return this.http.post(`/co/holidays/${e}`,t)}updateHoliday$(t){let{ymd:e,userId:n}=t;return this.http.put(`/co/holidays/${n}/${e}`,t)}removeHoliday$(t,e){return this.http.delete(`/co/holidays/${t}/${e}`)}};o.\u0275fac=function(e){return new(e||o)(de(_e),de(ue))},o.\u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();var je=(()=>{let o=class o extends F{constructor(t,e,n,C){super(),this.fb=t,this.messageService=e,this.codeService=n,this.holidayService=C,this.detail=null,this.ynCodes=this.codeService.createYnCodeData(),this.useRemove=!0,this.refresh=new S,this.remove=new S,this.close=new S}ngOnInit(){this.detailForm=this.fb.group({originalYmd:[""],ymd:["",[f.required,f.maxLength(8)]],userId:["",f.required],holidayName:["",[f.required,f.maxLength(30)]],holidayContent:["",[f.maxLength(100)]],useYn:["",[f.required]]})}ngOnChanges(t){if(t.detail&&this.detailForm){if(this.useRemove=!0,ee(t.detail.currentValue)){this.useRemove=!1,this.detailForm.reset({userId:this.user?.userId,useYn:"Y"});return}this.detailForm.patchValue(_({originalYmd:this.detail.ymd},this.detail))}}onSubmit(t){return g(this,null,function*(){let e=Y(t.originalYmd)?"\uB4F1\uB85D":"\uC218\uC815";(yield this.messageService.confirm1(`\uD734\uC77C \uC815\uBCF4\uB97C ${e}\uD558\uC2DC\uACA0\uC5B4\uC694?`))&&(Y(t.originalYmd)?this.holidayService.addHoliday$(t).subscribe(C=>{this.messageService.toastSuccess(`\uC815\uC0C1\uC801\uC73C\uB85C ${e}\uB418\uC5C8\uC5B4\uC694.`),this.detailForm.get("originalYmd").patchValue(C.holiday.ymd),this.refresh.emit()}):this.holidayService.updateHoliday$(t).subscribe(()=>{this.messageService.toastSuccess(`\uC815\uC0C1\uC801\uC73C\uB85C ${e}\uB418\uC5C8\uC5B4\uC694.`),this.refresh.emit()}))})}onRemove(t){return g(this,null,function*(){(yield this.messageService.confirm2("\uD734\uC77C\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC5B4\uC694?<br>\uC774 \uC791\uC5C5\uC740 \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC5B4\uC694."))&&this.holidayService.removeHoliday$(this.user?.userId,this.detail.ymd).subscribe(()=>{this.messageService.toastSuccess("\uC815\uC0C1\uC801\uC73C\uB85C \uC0AD\uC81C\uB418\uC5C8\uC5B4\uC694."),this.remove.emit()})})}onClose(){this.close.emit()}};o.\u0275fac=function(e){return new(e||o)(p(I),p(E),p(Te),p(ce))},o.\u0275cmp=x({type:o,selectors:[["my-holiday-detail"]],inputs:{detail:"detail"},outputs:{refresh:"refresh",remove:"remove",close:"close"},standalone:!0,features:[H,K,b],decls:13,vars:17,consts:[[3,"submit","remove","close","form","useRemove"],[3,"text"],[3,"control"],[1,"grid","mt-2"],[1,"col"],[3,"control","label","dateFormat","placeholder"],[3,"control","label","placeholder"],[3,"control","label","data"],[1,"col-12"],[3,"control","label"]],template:function(e,n){e&1&&(l(0,"ui-split-form",0),h("submit",function(q){return n.onSubmit(q)})("remove",function(q){return n.onRemove(q)})("close",function(){return n.onClose()}),v(1,"ui-content-title",1)(2,"ui-hidden-field",2)(3,"ui-hidden-field",2),l(4,"div",3)(5,"div",4),v(6,"ui-date-field",5),c(),l(7,"div",4),v(8,"ui-text-field",6),c(),l(9,"div",4),v(10,"ui-dropdown",7),c(),l(11,"div",8),v(12,"ui-textarea",9),c()()()),e&2&&(r("form",n.detailForm)("useRemove",n.useRemove),s(),r("text","\uD734\uC77C \uC815\uBCF4"),s(),r("control",n.detailForm.get("originalYmd")),s(),r("control",n.detailForm.get("userId")),s(3),r("control",n.detailForm.get("ymd"))("label","\uC77C\uC790")("dateFormat","yymmdd")("placeholder","\uC608) 20240301"),s(2),r("control",n.detailForm.get("holidayName"))("label","\uD734\uC77C\uBA85")("placeholder","\uC608) \uC0BC\uC77C\uC808"),s(2),r("control",n.detailForm.get("useYn"))("label","\uC0AC\uC6A9 \uC5EC\uBD80")("data",n.ynCodes),s(2),r("control",n.detailForm.get("holidayContent"))("label","\uD734\uC77C \uB0B4\uC6A9"))},dependencies:[ae,R,se,M,U,re,A]});let a=o;return a})();var Qe=["splitter"];function ze(a,o){a&1&&v(0,"ui-skeleton")(1,"ui-skeleton")(2,"ui-skeleton")}function Ke(a,o){if(a&1){let i=k();l(0,"ui-splitter",null,0)(2,"ui-table",2,1),h("refresh",function(){d(i);let e=u();return m(e.onRefresh())})("rowSelect",function(e){d(i);let n=u();return m(n.onRowSelect(e))})("unRowSelect",function(e){d(i);let n=u();return m(n.onRowUnselect(e))}),l(4,"ui-button",3),h("click",function(){d(i);let e=u();return m(e.addHoliday())}),c()(),l(5,"div",4)(6,"my-holiday-detail",5),h("refresh",function(){d(i);let e=u();return m(e.listHoliday())})("remove",function(){d(i);let e=u();return m(e.onRemove())})("close",function(){d(i);let e=u();return m(e.onClose())}),c()()()}if(a&2){let i=u();s(2),r("useAdd",!1)("useRemove",!1)("emptymessage","\uB4F1\uB85D\uB41C \uD734\uC77C\uC774 \uC5C6\uC5B4\uC694.")("cols",i.cols)("data",i.holidayList)("dataKey","ymd")("selection",i.selection)("paginator",!0),s(2),r("size","small")("icon","pi-plus")("label","\uD734\uC77C \uB4F1\uB85D")("outlined",!0),s(2),r("detail",i.detail)}}var Ne=(()=>{let o=class o extends F{constructor(t,e){super(),this.holidayStore=t,this.holidayService=e,this.detail=null,this.cols=[{field:"ymd",header:"\uC77C\uC790"},{field:"holidayName",header:"\uD734\uC77C\uBA85"},{field:"holidayContent",header:"\uD734\uC77C \uB0B4\uC6A9"},{field:"useYn",header:"\uC0AC\uC6A9 \uC5EC\uBD80"}]}get holidayList(){return this.holidayStore.select("holidayList").value}get holidayListDataLoad(){return this.holidayStore.select("holidayListDataLoad").value}ngOnInit(){!this.holidayListDataLoad&&this.user&&this.listHoliday()}listHoliday(){this.holidayService.listHoliday(this.user?.userId)}addHoliday(){this.detail={},this.splitter.show()}onRowSelect(t){this.holidayService.getHoliday$(this.user?.userId,t.data.ymd).subscribe(e=>{this.detail=e.holiday,this.splitter.show()})}onRowUnselect(t){this.detail={},this.splitter.hide()}onRefresh(){this.listHoliday()}onRemove(){this.splitter.hide(),this.listHoliday()}onClose(){this.splitter.hide()}};o.\u0275fac=function(e){return new(e||o)(p(ue),p(ce))},o.\u0275cmp=x({type:o,selectors:[["view-my-holiday"]],viewQuery:function(e,n){if(e&1&&J(Qe,5),e&2){let C;G(C=X())&&(n.splitter=C.first)}},standalone:!0,features:[H,b],decls:8,vars:1,consts:[["splitter",""],["table",""],["first","",3,"refresh","rowSelect","unRowSelect","useAdd","useRemove","emptymessage","cols","data","dataKey","selection","paginator"],["buttons","",3,"click","size","icon","label","outlined"],["second",""],[3,"refresh","remove","close","detail"]],template:function(e,n){e&1&&(l(0,"layout-page-description")(1,"ul")(2,"li"),V(3,"\uD734\uAC00 \uACC4\uC0B0\uC5D0 \uC81C\uC678\uD560 \uB0B4 \uD734\uC77C\uC744 \uC870\uD68C/\uC785\uB825\uD560 \uC218 \uC788\uC5B4\uC694."),c(),l(4,"li"),V(5,"\uD734\uC77C \uC785\uB825 \uC608\uC2DC) \uC77C\uC790: 20240301, \uD734\uC77C\uBA85: \uC0BC\uC77C\uC808"),c()()(),D(6,ze,3,0)(7,Ke,7,13,"ui-splitter")),e&2&&(s(6),T(n.holidayListDataLoad?7:6))},dependencies:[B,L,oe,te,le,je]});let a=o;return a})();var Je=a=>({menuId:a});function Ge(a,o){a&1&&v(0,"ui-skeleton")(1,"ui-skeleton")(2,"ui-skeleton")}function Xe(a,o){if(a&1&&v(0,"ui-text-field",10),a&2){let i=u(2);r("control",i.caculateVacationForm.get("quitYmd"))("label","\uD1F4\uC0AC\uC77C\uC790")("readonly",!0)}}function Ze(a,o){if(a&1){let i=k();l(0,"ui-checkbox",17),h("change",function(e){d(i);let n=u(2);return m(n.onSubmit(e))}),c()}if(a&2){let i=o.$implicit,t=u(2);r("control",t.caculateVacationForm.get("vacationTypeCodes"))("label",i.label)("value",i.value)}}function et(a,o){if(a&1){let i=k();l(0,"ui-tab",4),h("activeIndexChange",function(e){d(i);let n=u();return m(n.onChange(e))}),l(1,"ui-form",5),h("submit",function(e){d(i);let n=u();return m(n.onSubmit(e))}),l(2,"div",6)(3,"div",7)(4,"div",8)(5,"ui-dropdown",9),h("change",function(e){d(i);let n=u();return m(n.onAnnualTypeCodeChange(e))}),c(),v(6,"ui-text-field",10),D(7,Xe,1,3,"ui-text-field",10),c()()(),l(8,"ui-checkbox-group",11)(9,"div",6)(10,"div",12)(11,"ui-card")(12,"ui-checkbox-list"),he(13,Ze,1,3,"ui-checkbox",13,Ce),c()()(),l(15,"div",14)(16,"ui-button",15),h("click",function(){d(i);let e=u();return m(e.onReset())}),c()(),l(17,"div",14)(18,"ui-button",15),h("click",function(){d(i);let e=u();return m(e.onSave())}),c()()()()(),l(19,"human-vacation-list",16),h("refresh",function(){d(i);let e=u();return m(e.onRefresh())}),c()()}if(a&2){let i=u();r("vertical",!0)("tabs",i.workHistoryTabList)("activeIndex",i.activeIndex),s(),r("form",i.caculateVacationForm)("useSubmit",!1),s(4),r("control",i.caculateVacationForm.get("annualTypeCode"))("label","\uC5F0\uCC28\uBC1C\uC0DD\uAE30\uC900")("data",i.annualTypeCodes),s(),r("control",i.caculateVacationForm.get("joinYmd"))("label","\uC785\uC0AC\uC77C\uC790")("readonly",!0),s(),T(i.caculateVacationForm.get("quitYmd").value?7:-1),s(),r("label","\uD734\uAC00 \uACC4\uC0B0\uC5D0 \uD3EC\uD568\uD560 \uD734\uAC00\uB97C \uC120\uD0DD:"),s(5),ve(i.vacationTypeCodes),s(3),r("size","large")("icon","pi-undo")("severity","primary")("title","\uC6D0\uB798\uB300\uB85C \uBCF5\uC6D0")("text",!0),s(2),r("size","large")("icon","pi-save")("severity","success")("title","\uD734\uAC00\uACC4\uC0B0 \uC124\uC815 \uC800\uC7A5")("text",!0),s(),r("tableTitle",i.vacationTableTitle)("tableText",i.vacationTableText)}}var mi=(()=>{let o=class o extends F{constructor(t,e,n,C,q,$e){super(),this.fb=t,this.route=e,this.messageService=n,this.vacationStore=C,this.vacationService=q,this.workHistoryService=$e,this.tabs=[],this.activeIndex=0,this.defaultVacationTypeCodes=["ANNUAL","MONTH","MORNING","AFTERNOON","PAID","UNPAID","SICK"]}get vacationTableTitle(){return this.vacationStore.select("vacationTableTitle").value}get vacationTableText(){return this.vacationStore.select("vacationTableText").value}get workHistoryTabList(){return this.vacationStore.select("vacationWorkHistoryTabList").value}get workHistoryListDataLoad(){return this.vacationStore.select("vacationWorkHistoryTabList").value?.find(e=>e.key===this.activeWorkHistoryId)?.dataLoad??!1}get workHistoryList(){return this.vacationStore.select("vacationWorkHistoryList").value}ngOnInit(){return g(this,null,function*(){this.route.data.subscribe(({code:e})=>{this.annualTypeCodes=e.ANNUAL_TYPE_00,this.vacationTypeCodes=e.VACATION_TYPE_00});let t=yield pe(this.workHistoryService.getCurrentWorkHistory$(this.user?.employeeId));this.currentWorkHistoryId=t?.workHistory?.workHistoryId,this.vacationService.setWorkHistoryId(this.currentWorkHistoryId),this.caculateVacationForm=this.fb.group({workHistoryId:[this.currentWorkHistoryId],employeeId:[this.user?.employeeId],joinYmd:[""],quitYmd:[""],annualTypeCode:[this.annualTypeCodes],vacationTypeCodes:[this.defaultVacationTypeCodes]}),this.activeWorkHistoryId=this.currentWorkHistoryId,this.user&&this.listVacationCalc(this.activeWorkHistoryId)})}onChange(t){this.activeIndex=t.index,this.activeWorkHistoryId=Number(t.activeKey),this.setAnnualTypeCode(),this.listVacationCalc(this.activeWorkHistoryId),this.vacationService.setWorkHistoryId(this.activeWorkHistoryId),this.vacationService.setVacationTableContent(this.activeIndex)}onAnnualTypeCodeChange(t){let e=y(y().format("YYYYMMDD")),n=this.caculateVacationForm.get("joinYmd").value;if(e.diff(y(n),"year")>=1&&t.value==="JOIN_YMD"){this.messageService.toastInfo("\uADFC\uC18D 1\uB144 \uC774\uC0C1\uC77C \uACBD\uC6B0 \uC785\uC0AC\uC77C\uC790 \uAE30\uC900\uC73C\uB85C \uC870\uD68C\uD560 \uC218 \uC5C6\uC5B4\uC694."),this.caculateVacationForm.get("annualTypeCode").patchValue("FISCAL_YEAR");return}t.value==="FISCAL_YEAR"?this.caculateVacationForm.get("vacationTypeCodes").patchValue(this.defaultVacationTypeCodes.filter(C=>C!="MONTH")):t.value==="JOIN_YMD"&&this.caculateVacationForm.get("vacationTypeCodes").patchValue(this.defaultVacationTypeCodes.filter(C=>C!="ANNUAL")),this.listWorkHistory()}onSubmit(t){this.listWorkHistory()}onReset(){this.listVacationCalc(this.activeWorkHistoryId),this.listWorkHistory()}onSave(){this.vacationService.addVacationCalc$(w(_({},this.caculateVacationForm.value),{workHistoryId:this.activeWorkHistoryId})).subscribe(()=>{this.messageService.toastSuccess("\uD734\uAC00\uACC4\uC0B0 \uC124\uC815\uC774 \uC800\uC7A5\uB418\uC5C8\uC5B4\uC694.")})}onRefresh(){this.listWorkHistory()}listWorkHistory(){this.workHistoryService.listWorkHistory$(w(_({},this.caculateVacationForm.value),{employeeId:this.user?.employeeId})).subscribe(t=>{this.vacationStore.update("vacationWorkHistoryList",t.workHistoryList),this.vacationStore.update("vacationWorkHistoryTabList",t.workHistoryList.map(e=>({title:e.companyName,key:e.workHistoryId,dataLoad:!0}))),this.caculateVacationForm.get("joinYmd").patchValue(t.workHistoryList[this.activeIndex]?.joinYmd),this.caculateVacationForm.get("quitYmd").patchValue(t.workHistoryList[this.activeIndex]?.quitYmd),this.vacationService.setVacationTableContent(this.activeIndex)})}listVacationCalc(t){this.vacationService.listVacationCalc$(t).subscribe(e=>{e.vacationCalcList?.length>0?(this.caculateVacationForm.get("annualTypeCode").patchValue(e.vacationCalcList[0].annualTypeCode),this.caculateVacationForm.get("vacationTypeCodes").patchValue(e.vacationCalcList.map(n=>n.vacationTypeCode))):this.setAnnualTypeCode(),this.setJoinYmd(),this.listWorkHistory()})}setAnnualTypeCode(){let t=y(y().format("YYYYMMDD")),e=this.workHistoryList?.[this.activeIndex]?.joinYmd||this.user?.joinYmd;t.diff(y(e),"year")<1?(this.caculateVacationForm.get("annualTypeCode").patchValue("JOIN_YMD"),this.caculateVacationForm.get("vacationTypeCodes").patchValue(this.defaultVacationTypeCodes.filter(n=>n!="ANNUAL"))):(this.caculateVacationForm.get("annualTypeCode").patchValue("FISCAL_YEAR"),this.caculateVacationForm.get("vacationTypeCodes").patchValue(this.defaultVacationTypeCodes.filter(n=>n!="MONTH")))}setJoinYmd(){let t=this.workHistoryList?.[this.activeIndex]?.joinYmd||this.user?.joinYmd,e=this.workHistoryList?.[this.activeIndex]?.quitYmd||this.user?.quitYmd;this.caculateVacationForm.get("joinYmd").patchValue(t),this.caculateVacationForm.get("quitYmd").patchValue(e)}};o.\u0275fac=function(e){return new(e||o)(p(I),p(Z),p(E),p(j),p(N),p(He))},o.\u0275cmp=x({type:o,selectors:[["view-human-vacation"]],standalone:!0,features:[H,b],decls:16,vars:6,consts:[[3,"routerLink","queryParams"],[3,"vertical","tabs","activeIndex"],[1,"mt-5"],[3,"text"],[3,"activeIndexChange","vertical","tabs","activeIndex"],[3,"submit","form","useSubmit"],[1,"grid"],[1,"col-fixed"],[1,"input-box"],[3,"change","control","label","data"],[3,"control","label","readonly"],[3,"label"],[1,"col"],[3,"control","label","value"],[1,"col-fixed","flex","align-items-center"],[3,"click","size","icon","severity","title","text"],[3,"refresh","tableTitle","tableText"],[3,"change","control","label","value"]],template:function(e,n){e&1&&(l(0,"layout-page-description")(1,"ul")(2,"li"),V(3,"\uD68C\uC0AC\uBCC4 \uD734\uAC00\uB97C \uC870\uD68C/\uC785\uB825\uD560 \uC218 \uC788\uC5B4\uC694."),c(),l(4,"li"),V(5,"\uD734\uAC00 \uACC4\uC0B0\uC5D0 \uC81C\uC678\uD560 \uD734\uC77C\uC744 \uC785\uB825\uD558\uB824\uBA74 \uB9E8 \uD558\uB2E8\uC758 \uD734\uC77C\uAD00\uB9AC \uAE30\uB2A5\uC744 \uD65C\uC6A9\uD574\uC8FC\uC138\uC694."),c(),l(6,"li"),V(7,"\uD68C\uC0AC \uC785\uB825\uC740 "),l(8,"a",0),V(9,"\uB9C8\uC774\uD398\uC774\uC9C0"),c(),V(10," > \uADFC\uBB34\uC774\uB825 \uC815\uBCF4\uC5D0\uC11C \uD574\uC8FC\uC2DC\uBA74 \uB3FC\uC694."),c()()(),D(11,Ge,3,0)(12,et,20,25,"ui-tab",1),l(13,"div",2),v(14,"ui-content-title",3)(15,"view-my-holiday"),c()),e&2&&(s(8),r("routerLink","/hm/my-info")("queryParams",fe(4,Je,n.getMenuIdByMenuUrl("/hm/my-info"))),s(3),T(n.workHistoryListDataLoad?12:11),s(3),r("text","\uD734\uC77C\uAD00\uB9AC"))},dependencies:[ye,Se,xe,ie,L,ge,ne,R,M,De,Fe,Ie,we,B,A,le,Re,Ne]});let a=o;return a})();export{mi as HumanVacationComponent};
